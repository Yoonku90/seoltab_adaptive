<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ê³ 2_ì§€ì„œì¸ í•™ìƒ Â· ë‚´ì‹  í•™ìŠµ ì§€ì‹ë§µ (2025-09-04)</title>
  <style>
    :root{
      --bg: #f6f7fb; --card:#ffffff; --border:#e6e8ef; --text:#0f172a; --muted:#64748b;
      --indigo:#4f46e5; --green:#16a34a; --yellow:#f59e0b; --red:#ef4444; --blue:#3b82f6;
      --green-100:#dcfce7; --yellow-100:#fef9c3; --red-100:#fee2e2; --gray-100:#f1f5f9; --blue-100:#dbeafe;
    }
    *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#ffffff, var(--bg, #f6f7fb));color:var(--text, #0f172a);font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Apple SD Gothic Neo,Pretendard,Helvetica,Arial,sans-serif}
    .container{max-width:1120px;margin:0 auto;padding:24px}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;}
    .between{display:flex;align-items:center;justify-content:space-between;gap:12px}
    .card{background:var(--card, #ffffff);border:1px solid var(--border, #e6e8ef);border-radius:20px;box-shadow:0 4px 12px rgba(15,23,42,.04)}
    .p-16{padding:16px}.p-20{padding:20px}.p-24{padding:24px}
    .btn{border:1px solid var(--border, #e6e8ef);background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer}
    .btn.active{background:var(--indigo, #4f46e5);color:#fff;border-color:var(--indigo, #4f46e5)}
    .input{border:1px solid var(--border, #e6e8ef);background:#fff;border-radius:12px;padding:10px 12px;min-width:260px}
    .grid{display:grid;gap:16px}
    @media(min-width:640px){.grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}}
    @media(min-width:768px){.grid-3{grid-template-columns:repeat(3,minmax(0,1fr));}}
    .stat{min-width:240px}
    .hbar{height:8px;background:var(--gray-100, #f1f5f9);border-radius:999px;overflow:hidden}
    .hbar > span{display:block;height:100%}
    .pill{padding:3px 8px;border-radius:999px;font-size:11px;font-weight:700;display:inline-block}
    .legend .pill{border:1px solid var(--border, #e6e8ef);}
    .muted{color:var(--muted, #64748b)}
    .title{font-weight:800;letter-spacing:-.3px}
    .sub{font-size:12px}
    .kc-card{display:flex;gap:12px}
    .kc-ico{flex:0 0 auto;width:36px;height:36px;border-radius:12px;background:#f8fafc;display:grid;place-items:center;border:1px solid var(--border, #e6e8ef)}
    .small{font-size:12px}
    .type-card{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
    .kbd{font-variant-numeric:tabular-nums}
    .footer{font-size:12px;color:var(--muted, #64748b);display:flex;gap:8px;align-items:flex-start}
    .feedback-section h3 { font-size: 20px; margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; }
    .feedback-section h4 { font-size: 16px; margin: 24px 0 8px 0; color: var(--indigo, #4f46e5); border-left: 3px solid var(--indigo, #4f46e5); padding-left: 8px;}
    .feedback-section .summary { font-size: 14px; color: var(--muted, #64748b); margin-top: -12px; margin-bottom: 24px; }
    .feedback-section hr { border: 0; border-top: 1px solid var(--border, #e6e8ef); margin: 24px 0; }
    .feedback-section blockquote { margin: 12px 0; padding: 12px; background-color: var(--gray-100, #f1f5f9); border-left: 4px solid var(--border, #e6e8ef); border-radius: 8px; font-size: 13px; }
    .feedback-section .analysis { margin-top: 8px; }
    .feedback-section .analysis strong { color: var(--text, #0f172a); }
    @media print { #printBtn, .view-btn, #search {display:none} }
  </style>
</head>
<body>
  <div class="container">
    <div class="between" style="gap:16px;flex-wrap:wrap">
      <div>
        <div class="title" style="font-size:24px">ì˜ì–´II 3ê³¼ <span style="color:var(--indigo, #4f46e5)">KC & ìœ í˜• ì„±ì·¨ë„</span> ëŒ€ì‹œë³´ë“œ</div>
        <div class="sub muted">í•™ìƒ: <strong>ê³ 2_ì§€ì„œì¸ í•™ìƒ</strong> Â· ì‹œí—˜ì¼: <strong>2025-09-04</strong> Â· êµì¬: ëŠ¥ë¥ (ê¹€ì„±ê³¤)</div>
      </div>
      <div class="row">
        <button id="printBtn" class="btn">ë‚´ë³´ë‚´ê¸°/ì¸ì‡„</button>
      </div>
    </div>

    <div class="row" style="margin-top:16px;align-items:center">
      <div class="row">
        <button data-view="all" class="btn view-btn active" aria-pressed="true">ì „ì²´</button>
        <button data-view="core" class="btn view-btn" aria-pressed="false">ê¸°ë°˜</button>
        <button data-view="dialogue" class="btn view-btn" aria-pressed="false">ëŒ€í™”ë¬¸</button>
        <button data-view="reading" class="btn view-btn" aria-pressed="false">ë³¸ë¬¸</button>
        <button data-view="types" class="btn view-btn" aria-pressed="false">ë¬¸ì œ ìœ í˜•</button>
        <button data-view="feedback" class="btn view-btn" aria-pressed="false">í”¼ë“œë°±</button>
      </div>
      <div style="flex:1"></div>
      <input id="search" class="input" placeholder="KC ì½”ë“œ/ì´ë¦„/ì„¤ëª…/ìœ í˜• ê²€ìƒ‰" />
    </div>

    <div class="grid grid-2" style="margin-top:16px">
      <div class="card p-16 stat">
        <div class="muted small">KC í‰ê·  ì„±ì·¨ë„</div>
        <div class="row" style="align-items:center;gap:6px">
          <div id="avgKC" class="title" style="font-size:22px;margin-top:4px">â€”</div>
          <div id="avgKCDiff" class="small" style="font-weight:700;"></div>
        </div>
        <div class="hbar" style="margin-top:8px"><span id="avgKCBar" style="width:0"></span></div>
      </div>
      <div class="card p-16 stat">
        <div class="muted small">ë¬¸ì œ ìœ í˜• í‰ê·  ì„±ì·¨ë„</div>
        <div class="row" style="align-items:center;gap:6px">
          <div id="avgType" class="title" style="font-size:22px;margin-top:4px">â€”</div>
          <div id="avgTypeDiff" class="small" style="font-weight:700;"></div>
        </div>
        <div class="hbar" style="margin-top:8px"><span id="avgTypeBar" style="width:0"></span></div>
      </div>
    </div>

    <div class="legend row card p-16" style="margin-top:16px">
      <div class="muted small">ë²”ë¡€:</div>
      <span class="pill" style="background:var(--green-100, #dcfce7);color:var(--green, #16a34a)">ìš°ìˆ˜ â‰¥ 85%</span>
      <span class="pill" style="background:var(--yellow-100, #fef9c3);color:var(--yellow, #f59e0b)">60â€“84%</span>
      <span class="pill" style="background:var(--red-100, #fee2e2);color:var(--red, #ef4444)">1â€“59%</span>
      <span class="pill" style="background:#e5e7eb;color:#374151">ë¯¸í‰ê°€</span>
      <span class="pill" style="background:var(--blue-100, #dbeafe);color:var(--blue, #3b82f6)">NEW</span>
      <span class="muted small">â–²â–¼ ì´ì „ ëŒ€ë¹„</span>
    </div>

    <div id="mount"></div>

    <section class="card p-20" style="margin-top:16px" id="focusBox">
      <div class="between">
        <div>
          <div class="title" style="font-size:18px">ğŸ“Œ ì§‘ì¤‘ ë³´ì™„ ì˜ì—­ (ìƒìœ„ 3ê°œ KC)</div>
          <div class="sub muted">ì ìˆ˜ê°€ ë‚®ì€ ìˆœìœ¼ë¡œ ìë™ ì¶”ì²œ</div>
        </div>
      </div>
      <ol id="focusList" class="small" style="margin-top:8px;padding-left:18px"></ol>
    </section>

    <div class="footer" style="margin-top:16px">
      <span>ìƒ‰ìƒ ê¸°ì¤€: ğŸŸ¢ 85% ì´ìƒ, ğŸŸ¡ 60â€“84%, ğŸŸ¥ 1â€“59%, íšŒìƒ‰=ë¯¸í‰ê°€. ê²€ìƒ‰ ë˜ëŠ” ìƒë‹¨ ë²„íŠ¼ìœ¼ë¡œ ë·°ë¥¼ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ì‡„ ë²„íŠ¼ìœ¼ë¡œ PDF ì €ì¥ ê°€ëŠ¥.</span>
    </div>
  </div>

  <script>
  (() => { 'use strict';
    // ======== ë°ì´í„°(êµì²´ ëŒ€ìƒ) ========
    const studentName = "ê³ 2_ì§€ì„œì¸";
    const examDate = "2025-09-04";

    // --- ì´ì „ ì„±ì·¨ë„ ---
    const prevKcScores = { "KC-3D1": 100, "KC-3D2": 100, "KC-3G1": 70, "KC-3G2": 66.7, "KC-3R1": 92.7, "KC-3R2": 88.3, "KC-3R3": 70.9, "KC-3R4": 86.5, "KC-3R5": 93.9, "KC-3R6": 90.4, "KC-3R7": 94.7, "KC-3V1": 51.4 };
    const prevTypeScores = { "112": 100, "251": 50, "252": 60, "253": 88, "311": 100, "312": 95.2, "314": 100, "321": 83.3, "322": 83.3, "323": 100, "324": 100, "325": 0, "331": 100, "332": 40 };

    // --- í˜„ì¬ ì„±ì·¨ë„ ---
    const kcScores = { "KC-3D1": 100, "KC-3D2": 100, "KC-3G1": 70, "KC-3G2": 66.7, "KC-3R1": 95.3, "KC-3R2": 91.8, "KC-3R3": 81.2, "KC-3R4": 86.4, "KC-3R5": 93.4, "KC-3R6": 83.8, "KC-3R7": 95.6, "KC-3V1": 63.1 };
    const typeScores = [
      { code:"112", name:"ëŒ€í™” ë‚´ìš© ì¼ì¹˜/ë¶ˆì¼ì¹˜", area:"ëŒ€í™”", score:100, kcs:["KC-3D1","KC-3D2"]},
      { code:"251", name:"ì–´ë²•ìƒ ì˜³ì€/í‹€ë¦° ê²ƒ", area:"ë¬¸ë²•", score:75, kcs:["KC-3R1","KC-3R2","KC-3R3","KC-3R4","KC-3R5"]},
      { code:"252", name:"ì“°ì„ êµ¬ë¶„í•˜ê¸°", area:"ë¬¸ë²•", score:60, kcs:["KC-3G1","KC-3G2"]},
      { code:"253", name:"ë¹ˆì¹¸ì— ì ì ˆí•œ ê²ƒ ê³ ë¥´ê¸°", area:"ë¬¸ë²•", score:88, kcs:["KC-3G1","KC-3G2"]},
      { code:"311", name:"ê¸€ì˜ ì£¼ì œ/ì œëª© íŒŒì•…", area:"ë…í•´", score:100, kcs:["KC-3R1","KC-3R6","KC-3R7"]},
      { code:"312", name:"ë³¸ë¬¸ ë‚´ìš© ì¼ì¹˜/ë¶ˆì¼ì¹˜", area:"ë…í•´", score:94.6, kcs:["KC-3R1","KC-3R2","KC-3R3","KC-3R4","KC-3R5"]},
      { code:"314", name:"ìš”ì•½ë¬¸ ì™„ì„±", area:"ë…í•´", score:86.4, kcs:["KC-3R2","KC-3R6","KC-3R7","KC-3V1"]},
      { code:"321", name:"ë¬¸ì¥ ì‚½ì…/íë¦„", area:"ë…í•´", score:80, kcs:["KC-3R1","KC-3R3","KC-3R6","KC-3V1"]},
      { code:"322", name:"ê¸€ì˜ ìˆœì„œ ë°°ì—´", area:"ë…í•´", score:87.5, kcs:["KC-3R1","KC-3R3"]},
      { code:"323", name:"ì´ì–´ì§ˆ ë‚´ìš© ì¶”ë¡ ", area:"ë…í•´", score:100, kcs:[]},
      { code:"324", name:"ì§€ì¹­/ì˜ë¯¸ ì¶”ë¡ ", area:"ë…í•´", score:100, kcs:[]},
      { code:"325", name:"ë³¸ë¬¸ ë¹ˆì¹¸ ì¶”ë¡ ", area:"ë…í•´", score:47.1, kcs:["KC-3R2","KC-3R3","KC-3R4","KC-3V1"]},
      { code:"331", name:"ì–´íœ˜ ì˜ë¯¸ íŒŒì•…", area:"ì–´íœ˜", score:100, kcs:["KC-3V1"]},
      { code:"332", name:"ì˜ì˜í’€ì´", area:"ì–´íœ˜", score:50, kcs:["KC-3R4", "KC-3V1"]}
    ];

    // KC ë©”íƒ€
    const kcMeta = {
      "KC-3G1": { area: "ë¬¸ë²•", label: "ì¬ê·€ëŒ€ëª…ì‚¬ì˜ ê°•ì¡°ìš©ë²•", desc: "'ìŠ¤ìŠ¤ë¡œ', 'ìì²´ë¡œ' ì˜ë¯¸ ê°•ì¡°, ìƒëµ ê°€ëŠ¥" },
      "KC-3G2": { area: "ë¬¸ë²•", label: "ì ‘ì†ì‚¬ whether", desc: "'~ì¸ì§€ ì•„ë‹Œì§€' ì˜ë¯¸ì˜ ëª…ì‚¬ì ˆ" },
      "KC-3V1": { area: "ì–´íœ˜", label: "í†µê³„/ë¹„íŒì  ì‚¬ê³  ì–´íœ˜", desc: "statistics, sample, average, misleading ë“±" },
      "KC-3D1": { area: "ëŒ€í™”ë¬¸", label: "í–¥ìˆ˜ì˜ ê¸ì •ì  íš¨ê³¼", desc: "ì •ì‹  ê±´ê°•, ìì¡´ê°, ìœ ëŒ€ê°ì— ë¯¸ì¹˜ëŠ” ì˜í–¥" },
      "KC-3D2": { area: "ëŒ€í™”ë¬¸", label: "ì‚¶ì˜ ê°€ì¹˜ ì„¤ë¬¸ì¡°ì‚¬", desc: "ê·¸ë˜í”„ ê²°ê³¼ë¥¼ í†µí•œ ê°€ì¹˜ê´€ íŒŒì•…" },
      "KC-3R1": { area: "ë³¸ë¬¸", label: "í†µê³„ì˜ ì—­í• ê³¼ ìœ„í—˜ì„±", desc: "ì¼ìƒ ì† í†µê³„ì˜ ê¸ì •ì  ì—­í• ê³¼ ì•…ìš© ê°€ëŠ¥ì„±" },
      "KC-3R2": { area: "ë³¸ë¬¸", label: "í‘œë³¸ì˜ í¬ê¸° ë¬¸ì œ", desc: "ì ì€ í‘œë³¸ìœ¼ë¡œ ì¸í•œ ì˜¤í•´ ìœ ë°œ ê°€ëŠ¥ì„±" },
      "KC-3R3": { area: "ë³¸ë¬¸", label: "í‘œë³¸ì˜ ë¬´ì‘ìœ„ì„± ë¬¸ì œ", desc: "ìë°œì  ì‘ë‹µ í‘œë³¸ ì¶”ì¶œì˜ í¸í–¥ì„±" },
      "KC-3R4": { area: "ë³¸ë¬¸", label: "í‰ê· ì˜ í•¨ì • ì†Œê°œ", desc: "í‰ê·  ì¢…ë¥˜ì— ë”°ë¼ ë‹¬ë¼ì§€ëŠ” í•´ì„" },
      "KC-3R5": { area: "ë³¸ë¬¸", label: "ë‹¤ì–‘í•œ ì¢…ë¥˜ì˜ í‰ê· ", desc: "ì‚°ìˆ í‰ê· , ì¤‘ì•™ê°’, ìµœë¹ˆê°’ì˜ ê°œë…ê³¼ í™œìš©" },
      "KC-3R6": { area: "ë³¸ë¬¸", label: "ê·¸ë˜í”„ ì™œê³¡", desc: "ì„¸ë¡œì¶• ì¡°ì‘ì„ í†µí•œ ì‹œê°ì  íš¨ê³¼ ì™œê³¡" },
      "KC-3R7": { area: "ë³¸ë¬¸", label: "ë¹„íŒì  ì‹œê°ì˜ ì¤‘ìš”ì„±", desc: "í†µê³„ ìë£Œì˜ ë§¹ëª©ì  ìˆ˜ìš© ì§€ì–‘" }
    };

    const groups = [
      { id: "core", title: "A. ê¸°ë°˜ ì§€ì‹", subtitle: "ë¬¸ë²•Â·ì–´íœ˜ ê¸°ë°˜", items:["KC-3G1","KC-3G2","KC-3V1"] },
      { id: "dialogue", title: "B-1. ì ìš© Â· ëŒ€í™”ë¬¸", subtitle: "ë°œí‘œ ë° ì„¤ë¬¸ì¡°ì‚¬ ë‚´ìš© ì´í•´", items:["KC-3D1","KC-3D2"] },
      { id: "reading", title: "B-2. ì ìš© Â· ë³¸ë¬¸", subtitle: "í†µê³„ì˜ í•¨ì • ë¹„íŒì ìœ¼ë¡œ ì½ê¸°", items:["KC-3R1","KC-3R2","KC-3R3","KC-3R4","KC-3R5","KC-3R6","KC-3R7"] }
    ];

    // ======== ë³€í™” ê³„ì‚° ========
    const kcChanges = Object.keys(kcScores).reduce((acc, key) => {
      const prev = prevKcScores[key];
      const curr = kcScores[key];
      acc[key] = { isNew: prev === undefined, diff: prev !== undefined ? curr - prev : 0 };
      return acc;
    }, {});
    const typeChanges = typeScores.reduce((acc, item) => {
      const prev = prevTypeScores[item.code];
      const curr = item.score;
      acc[item.code] = { isNew: prev === undefined, diff: prev !== undefined ? curr - prev : 0 };
      return acc;
    }, {});

    // ======== í—¬í¼ ========
    const thresholds = { excellent:85, ok:60 };
    const clamp = (n) => Math.max(0, Math.min(100, Number(n||0)));
    function statusColor(v, bgOnly=false){
      if(v==null) return bgOnly? '#e5e7eb' : 'background:#e5e7eb;color:#374151';
      if(v>=thresholds.excellent) return bgOnly? 'var(--green-100, #dcfce7)' : 'background:var(--green-100, #dcfce7);color:var(--green, #16a34a)';
      if(v>=thresholds.ok) return bgOnly? 'var(--yellow-100, #fef9c3)' : 'background:var(--yellow-100, #fef9c3);color:var(--yellow, #f59e0b)';
      return bgOnly? 'var(--red-100, #fee2e2)' : 'background:var(--red-100, #fee2e2);color:var(--red, #ef4444)';
    }
    function barColor(v){
      if(v==null) return '#e5e7eb';
      if(v>=thresholds.excellent) return 'var(--green, #16a34a)';
      if(v>=thresholds.ok) return 'var(--yellow, #f59e0b)';
      return 'var(--red, #ef4444)';
    }
    function scoreLabel(v){ if(v==null) return 'ë¯¸í‰ê°€'; const n=+v; return n===100 ? '100%' : n.toFixed(1)+'%'; }
    function average(nums){
      const vals = nums.filter(v => v!=null && !Number.isNaN(Number(v)));
      if(!vals.length) return null;
      return vals.reduce((a,b)=>a+Number(b),0)/vals.length;
    }

    function getFeedbackHTML(){
        return `
            <h3>ğŸ“ˆ ì§€ì„œì¸ í•™ìƒ í•™ìŠµ ê²°ê³¼ ë¶„ì„</h3>
            <p class="summary" style="padding:12px; background-color: var(--gray-100, #f1f5f9); border-radius: 12px; font-size: 14px; margin-top:0;">
                ì§€ì„œì¸ í•™ìƒì€ <strong>ê¸€ì˜ ì „ì²´ì ì¸ íë¦„ê³¼ í•µì‹¬ ë‚´ìš©ì„ íŒŒì•…í•˜ëŠ” ë…í•´ ëŠ¥ë ¥ì´ ë§¤ìš° ë›°ì–´ë‚©ë‹ˆë‹¤.</strong> ëŒ€ë¶€ë¶„ì˜ ë³¸ë¬¸ ì´í•´ë„(KC-3R ê³„ì—´)ì™€ ë‚´ìš© ì¼ì¹˜/ë¶ˆì¼ì¹˜ ìœ í˜•(ìœ í˜• 312)ì—ì„œ 90%ê°€ ë„˜ëŠ” ë†’ì€ ì„±ì·¨ë„ë¥¼ ë³´ì´ê³  ìˆì–´, ì•ˆì •ì ì¸ ê¸°ë³¸ê¸°ë¥¼ ê°–ì¶”ê³  ìˆìŒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
                ë‹¤ë§Œ, í˜„ì¬ì˜ íƒì›”í•œ ë…í•´ë ¥ì„ ë§Œì ìœ¼ë¡œ ì—°ê²°í•˜ê¸° ìœ„í•´ ë³´ì™„í•´ì•¼ í•  <strong>ê²°ì •ì ì¸ ì•½ì </strong>ì´ ëª…í™•í•˜ê²Œ ë‚˜íƒ€ë‚˜ê³  ìˆìŠµë‹ˆë‹¤. ë°”ë¡œ <strong>'ì–´íœ˜ì˜ ì •í™•í•œ ì˜ë¯¸'</strong>ë¥¼ íŒŒì•…í•˜ê³  ë¬¸ë§¥ì— ì ìš©í•˜ëŠ” ëŠ¥ë ¥ì…ë‹ˆë‹¤.
            </p>
            <hr>
            <h4>ğŸ“Œ ì•½ì  ë¶„ì„ 1: ë¬¸ë§¥ ì† ì–´íœ˜ ì¶”ë¡  ëŠ¥ë ¥ (ìœ í˜• 325: 47.1%)</h4>
            <p class="analysis">ê¸€ì˜ ë§¥ë½ì€ ì´í•´í•˜ì§€ë§Œ, ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ê°€ì¥ ì ì ˆí•œ ë‹¨ì–´ë¥¼ ê³ ë¥´ê±°ë‚˜, ì“°ì„ì´ ì–´ìƒ‰í•œ ë‹¨ì–´ë¥¼ ì°¾ì•„ë‚´ëŠ” ë° ì–´ë ¤ì›€ì„ ê²ªê³  ìˆìŠµë‹ˆë‹¤. ì´ëŠ” <strong>í†µê³„ ë° ë¹„íŒì  ì‚¬ê³  ê´€ë ¨ ì–´íœ˜(KC-3V1)</strong>ì— ëŒ€í•œ ì´í•´ë„ê°€ 63.1%ë¡œ ìƒëŒ€ì ìœ¼ë¡œ ë‚®ì€ ê²ƒê³¼ ì§ì ‘ì ì¸ ê´€ë ¨ì´ ìˆìŠµë‹ˆë‹¤.</p>
            <blockquote>
                <strong>ğŸ” ëŒ€í‘œ ë¬¸ì œ ì˜ˆì‹œ ([ìµœë‹¤ì˜¤ë‹µ] 13ë²ˆ)</strong>
                <p style="margin-top:8px; margin-bottom:4px;"><strong>[ì§€ë¬¸]</strong> In the first graph, the <code>â‘ horizontal</code> axis goes all the way up to 100 and all the way down to 0, which makes the decrease in the percentage look modest. In the other graph, only 10 percentage points are shown, from 65 to 75, which makes the change seem much more <code>â‘¢extreme</code>.</p>
                <p style="margin-top:4px; margin-bottom:4px;"><strong>[ë¬¸ì œ]</strong> 13. ë‹¤ìŒ ê¸€ì˜ ë°‘ì¤„ ì¹œ ë¶€ë¶„ ì¤‘, ë¬¸ë§¥ìƒ ì–´ìƒ‰í•œ ë‹¨ì–´ë¥¼ ê³ ë¥´ì‹œì˜¤.</p>
                <p style="margin-top:4px; margin-bottom:0;">â¡ï¸ <strong>ì •ë‹µ: â‘ ë²ˆ</strong> / <strong>í•™ìƒ ë‹µì•ˆ: â‘¢ë²ˆ</strong></p>
            </blockquote>
            <p class="analysis">
                <strong>ë¶„ì„:</strong> ì§€ì„œì¸ í•™ìƒì€ ë³€í™”ê°€ ê¸‰ê²©í•´ ë³´ì´ë„ë¡ ë§Œë“œëŠ” ë‘ ë²ˆì§¸ ê·¸ë˜í”„ì˜ ìƒí™©ì„ ì„¤ëª…í•˜ëŠ” 'extreme(ê·¹ì ì¸)'ì´ë¼ëŠ” ë‹¨ì–´ê°€ ì–´ìƒ‰í•˜ë‹¤ê³  íŒë‹¨í–ˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ ë‹¨ì–´ëŠ” ë¬¸ë§¥ìƒ ì ì ˆí•˜ê²Œ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. <br>ì§„ì§œ ì˜¤ë¥˜ëŠ” â‘ ë²ˆ <strong>'horizontal(ê°€ë¡œì˜)'</strong>ì´ì—ˆìŠµë‹ˆë‹¤. ì§€ë¬¸ ì† ê·¸ë˜í”„ 1ë²ˆì—ì„œ 0ë¶€í„° 100ê¹Œì§€ì˜ ìˆ˜ì¹˜ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ì¶•ì€ <strong>'ì„¸ë¡œì¶•(vertical axis)'</strong>ì…ë‹ˆë‹¤. ì´ì²˜ëŸ¼ 'horizontal'ê³¼ 'vertical' ê°™ì€ í•µì‹¬ ì–´íœ˜ì˜ ì˜ë¯¸ë¥¼ ì •í™•íˆ ì•Œì§€ ëª»í•´ ë°œìƒí•œ ì‹¤ìˆ˜ì…ë‹ˆë‹¤. ì „ì²´ì ì¸ ë‚´ìš©ì€ ì´í•´í–ˆì§€ë§Œ, ê²°ì •ì ì¸ ë‹¨ì–´ í•˜ë‚˜ì˜ ì˜ë¯¸ë¥¼ ë†“ì³ ì˜¤ë‹µìœ¼ë¡œ ì´ì–´ì§„ ëŒ€í‘œì ì¸ ì‚¬ë¡€ì…ë‹ˆë‹¤.
            </p>

            <h4>ğŸ“Œ ì•½ì  ë¶„ì„ 2: ì„¸ë¶€ ì •ë³´ í•´ì„ì˜ ì •ë°€í•¨</h4>
            <p class="analysis">ì „ì²´ì ì¸ ë‚´ìš© íŒŒì•… ëŠ¥ë ¥(ìœ í˜• 312: 94.6%)ì€ ë§¤ìš° ìš°ìˆ˜í•˜ì§€ë§Œ, ê°€ë” <strong>ê²°ì •ì ì¸ ë‹¨ì„œë‚˜ í‘œí˜„ì„ ë†“ì³</strong> ì•„ì‰½ê²Œ í‹€ë¦¬ëŠ” ê²½ìš°ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ëŠ” ê¼¼ê¼¼í•¨ê³¼ ì •ë°€í•¨ì„ ì¡°ê¸ˆ ë” ê¸°ë¥´ë©´ ì¶©ë¶„íˆ ê·¹ë³µí•  ìˆ˜ ìˆëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤.</p>
            <blockquote>
                <strong>ğŸ” ëŒ€í‘œ ë¬¸ì œ ì˜ˆì‹œ 1 ([ìµœë‹¤ë¹ˆì¶œ] 9ë²ˆ)</strong>
                <p style="margin-top:8px; margin-bottom:4px;"><strong>[ì§€ë¬¸]</strong> However, the fact is that more than half of its employees earn <code>no more than $30,000</code> or less a year...</p>
                <p style="margin-top:4px; margin-bottom:4px;"><strong>[ë¬¸ì œ]</strong> 9. ìœ—ê¸€ì˜ ë‚´ìš©ê³¼ ì¼ì¹˜í•˜ëŠ” ê²ƒì„ ê³ ë¥´ì‹œì˜¤.</p>
                <p style="margin-top:4px; margin-bottom:0;">â¡ï¸ <strong>ì •ë‹µ: â‘ ë²ˆ</strong> / <strong>í•™ìƒ ë‹µì•ˆ: â‘¡ë²ˆ</strong> "More than 50% of ABC corporation's employees get a bit more than $30,000."</p>
            </blockquote>
            <p class="analysis">
                <strong>ë¶„ì„:</strong> í•™ìƒì´ ê³ ë¥¸ â‘¡ë²ˆ ì„ íƒì§€ëŠ” 'ì§ì›ì˜ 50% ì´ìƒì´ 30,000ë‹¬ëŸ¬ë³´ë‹¤ ì•½ê°„ ë” ë°›ëŠ”ë‹¤'ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì§€ë¬¸ì—ì„œëŠ” <strong>'no more than $30,000'</strong>ë¼ê³  ëª…ì‹œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” <strong>'ë§ì•„ ë´ì•¼ 30,000ë‹¬ëŸ¬ (ì¦‰, 30,000ë‹¬ëŸ¬ ì´í•˜)'</strong>ë¼ëŠ” ëœ»ìœ¼ë¡œ, ì„ íƒì§€ì˜ ë‚´ìš©ê³¼ ì •ë°˜ëŒ€ì…ë‹ˆë‹¤. 'no more than'ì´ë¼ëŠ” í‘œí˜„ì˜ ì •í™•í•œ ì˜ë¯¸ë¥¼ íŒŒì•…í–ˆë‹¤ë©´ í”¼í•  ìˆ˜ ìˆì—ˆë˜ ì•„ê¹Œìš´ ì‹¤ìˆ˜ì…ë‹ˆë‹¤.
            </p>
        `;
    }

    // ======== ë Œë” ========
    const mount = document.getElementById('mount');
    const searchEl = document.getElementById('search');
    const focusBox = document.getElementById('focusBox');
    let currentView = 'all';

    function render(){
      const q = (searchEl.value||'').trim().toLowerCase();
      mount.innerHTML = '';
      if(focusBox) focusBox.style.display = currentView === 'feedback' ? 'none' : 'block';

      ['core','dialogue','reading'].forEach(id=>{
        if(!(currentView==='all' || currentView===id)) return;
        const g = groups.find(x=>x.id===id);
        const items = g.items.filter(k=>{
          if(!q) return true;
          const m = kcMeta[k]||{};
          return k.toLowerCase().includes(q) || (m.label||'').toLowerCase().includes(q) || (m.desc||'').toLowerCase().includes(q) || (m.area||'').toLowerCase().includes(q);
        });
        if(!items.length) return;

        const sec = document.createElement('section');
        sec.className = 'card p-20';
        sec.style.marginTop = '16px';
        sec.innerHTML = `
          <div class="between">
            <div>
              <div class="title" style="font-size:18px">${id==='core'?'ğŸ§©':id==='dialogue'?'ğŸ’¬':'ğŸ“–'} ${g.title}</div>
              <div class="sub muted">${g.subtitle}</div>
            </div>
          </div>
        `;
        const grid = document.createElement('div');
        grid.className = 'grid grid-2 grid-3';
        grid.style.marginTop = '12px';
        items.forEach(k => grid.appendChild(KCCard(k)));
        sec.appendChild(grid);
        mount.appendChild(sec);
      });

      if(currentView==='all' || currentView==='types'){
        const filteredTypes = typeScores.filter(t=>{
          if(!q) return true;
          return (t.name+t.code+t.area+(t.kcs||[]).join(',')).toLowerCase().includes(q);
        });
        if(filteredTypes.length){
          const sec = document.createElement('section');
          sec.className = 'card p-20';
          sec.style.marginTop = '16px';
          sec.innerHTML = `<div class="between"><div><div class="title" style="font-size:18px">ğŸ“ ë¬¸ì œ ìœ í˜• ì„±ì·¨ë„</div><div class="sub muted">ê° ìœ í˜•ì´ ì—°ê³„í•˜ëŠ” KCì™€ ì„±ì·¨ë„ë¥¼ í•¨ê»˜ í™•ì¸</div></div></div>`;
          const grid = document.createElement('div');
          grid.className = 'grid grid-2';
          grid.style.marginTop = '12px';
          filteredTypes.forEach(t => grid.appendChild(TypeCard(t)));
          sec.appendChild(grid);
          mount.appendChild(sec);
        }
      }

      if(currentView==='all' || currentView==='feedback'){
        const sec = document.createElement('section');
        sec.className = 'card p-24 feedback-section';
        sec.style.marginTop = '16px';
        sec.innerHTML = getFeedbackHTML();
        mount.appendChild(sec);
      }

      const avgKCVal = average(Object.values(kcScores));
      const avgKCEl = document.getElementById('avgKC');
      if (avgKCEl) avgKCEl.textContent = scoreLabel(avgKCVal);
      const avgKCBarEl = document.getElementById('avgKCBar');
      if (avgKCBarEl) {
        avgKCBarEl.style.width = clamp(avgKCVal||0)+'%';
        avgKCBarEl.style.background = barColor(avgKCVal);
      }

      const prevKCAvgVal = average(Object.keys(kcScores).map(k => (prevKcScores.hasOwnProperty(k) ? prevKcScores[k] : null)));
      const kcDiffEl = document.getElementById('avgKCDiff');
      if(kcDiffEl) {
        if(prevKCAvgVal==null){
          kcDiffEl.innerHTML = `<span class="pill" style="background:var(--blue-100, #dbeafe);color:var(--blue, #3b82f6)">NEW</span>`;
        } else {
          const diff = (avgKCVal??0) - prevKCAvgVal;
          if(Math.abs(diff) > 0.05){
            const color = diff>0 ? 'var(--green, #16a34a)' : 'var(--red, #ef4444)';
            const arrow = diff>0 ? 'â–²' : 'â–¼';
            kcDiffEl.innerHTML = `<span style="color:${color};font-variant-numeric:tabular-nums">${arrow}${Math.abs(diff).toFixed(1)}</span>`;
          } else {
            kcDiffEl.textContent = '';
          }
        }
      }

      const avgTypeVal = average(typeScores.map(t=>t.score));
      const avgTypeEl = document.getElementById('avgType');
      if (avgTypeEl) avgTypeEl.textContent = scoreLabel(avgTypeVal);
      const avgTypeBarEl = document.getElementById('avgTypeBar');
      if (avgTypeBarEl) {
        avgTypeBarEl.style.width = clamp(avgTypeVal||0)+'%';
        avgTypeBarEl.style.background = barColor(avgTypeVal);
      }
      
      const prevTypeAvgVal = average(typeScores.map(t => (prevTypeScores.hasOwnProperty(t.code) ? prevTypeScores[t.code] : null)));
      const typeDiffEl = document.getElementById('avgTypeDiff');
      if(typeDiffEl) {
        if(prevTypeAvgVal==null){
          typeDiffEl.innerHTML = `<span class="pill" style="background:var(--blue-100, #dbeafe);color:var(--blue, #3b82f6)">NEW</span>`;
        } else {
          const diff = (avgTypeVal??0) - prevTypeAvgVal;
          if(Math.abs(diff) > 0.05){
            const color = diff>0 ? 'var(--green, #16a34a)' : 'var(--red, #ef4444)';
            const arrow = diff>0 ? 'â–²' : 'â–¼';
            typeDiffEl.innerHTML = `<span style="color:${color};font-variant-numeric:tabular-nums">${arrow}${Math.abs(diff).toFixed(1)}</span>`;
          } else {
            typeDiffEl.textContent = '';
          }
        }
      }
      renderFocus();
    }

    function KCCard(id){
      const m = kcMeta[id]||{}; const v = kcScores[id];
      const change = kcChanges[id] || { isNew:true, diff:0 };
      let changeHTML = '';
      if(change.isNew){
        changeHTML = `<span class="pill" style="background:var(--blue-100, #dbeafe); color:var(--blue, #3b82f6);">NEW</span>`;
      } else if(Math.abs(change.diff) > 0.05){
        const color = change.diff > 0 ? 'var(--green, #16a34a)' : 'var(--red, #ef4444)';
        const arrow = change.diff > 0 ? 'â–²' : 'â–¼';
        changeHTML = `<span style="font-size:11px;font-weight:700;color:${color};">${arrow}${Math.abs(change.diff).toFixed(1)}</span>`;
      }

      const el = document.createElement('div');
      el.className = 'card p-16'; el.style.borderColor = '#e5e7eb';
      el.innerHTML = `
        <div class="kc-card">
          <div class="kc-ico">${m.area==='ë¬¸ë²•'?'âœï¸':m.area==='ì–´íœ˜'?'ğŸ”¤':m.area==='ëŒ€í™”ë¬¸'?'ğŸ’¬':'ğŸ“–'}</div>
          <div style="flex:1;min-width:0">
            <div class="row" style="align-items:center;gap:6px;flex-wrap:nowrap">
              <span class="small" style="font-weight:700;white-space:nowrap">${id}</span>
              <span class="pill" style="${statusColor(v)}">${scoreLabel(v)}</span>
              ${changeHTML}
            </div>
            <div class="small" style="font-weight:700;margin-top:4px">${m.label||''}</div>
            <div class="small muted" style="margin-top:2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;">${m.desc||''}</div>
            <div class="hbar" style="margin-top:8px"><span style="width:${clamp(v||0)}%; background:${barColor(v)}"></span></div>
          </div>
        </div>
      `;
      return el;
    }

    function TypeCard(t){
      const change = typeChanges[t.code] || { isNew:true, diff:0 };
      let changeHTML = '';
      if(change.isNew){
        changeHTML = `<span class="pill" style="background:var(--blue-100, #dbeafe); color:var(--blue, #3b82f6); margin-left:4px;">NEW</span>`;
      } else if(Math.abs(change.diff) > 0.05){
        const color = change.diff > 0 ? 'var(--green, #16a34a)' : 'var(--red, #ef4444)';
        const arrow = change.diff > 0 ? 'â–²' : 'â–¼';
        changeHTML = `<span style="font-size:12px;font-weight:700;color:${color};margin-left:4px;">${arrow}${Math.abs(change.diff).toFixed(1)}</span>`;
      }

      const el = document.createElement('div');
      el.className = 'card p-16';
      const related = (t.kcs||[]).map(k=>`${k} (${scoreLabel(kcScores[k])})`).join(' Â· ');
      el.innerHTML = `
        <div class="type-card">
          <div style="min-width:0">
            <div class="row" style="gap:6px;flex-wrap:wrap">
              <span class="small" style="font-weight:700">${t.name}</span>
              <span class="small muted">[${t.code}]</span>
              <span class="pill" style="background:#f3f4f6;color:#374151">${t.area}</span>
            </div>
            <div class="small muted" style="margin-top:4px">ì—°ê³„ KC: ${related}</div>
          </div>
          <div style="text-align:right;min-width:120px;flex-shrink:0;">
            <div class="row" style="justify-content:flex-end;gap:0;">
              <div style="font-weight:700">${scoreLabel(t.score)}</div>
              ${changeHTML}
            </div>
            <div class="hbar" style="margin-top:6px"><span style="width:${clamp(t.score||0)}%; background:${barColor(t.score)}"></span></div>
          </div>
        </div>
      `;
      return el;
    }

    function renderFocus(){
      const list = document.getElementById('focusList');
      if (!list) return;
      const entries = Object.entries(kcScores)
        .filter(([k,v])=>v!=null && v < thresholds.excellent)
        .sort((a,b)=> (a[1]-b[1]) || ((kcMeta[a[0]]?.area || '') > (kcMeta[b[0]]?.area || '') ? 1 : -1))
        .slice(0,3);

      const tips = {
        'KC-3V1': 'í†µê³„ ê´€ë ¨ ì–´íœ˜(random, sample ë“±)ì˜ ì˜ì˜í’€ì´ë¥¼ í™•ì¸í•˜ì„¸ìš”.',
        'KC-3G2': 'whetherê°€ ì´ë„ëŠ” ëª…ì‚¬ì ˆì´ ë¬¸ì¥ì˜ ì–´ëŠ ìœ„ì¹˜ì— ì“°ì´ëŠ”ì§€ ë³µìŠµí•˜ì„¸ìš”.',
        'KC-3R3': 'ìë°œì  ì‘ë‹µ í‘œë³¸ ì¶”ì¶œ(voluntary response sampling)ì˜ ë¬¸ì œì ì„ ì •ë¦¬í•´ë³´ì„¸ìš”.'
      };

      list.innerHTML = entries.map(([k,v])=>{
        const m = kcMeta[k]||{}; const tip = tips[k]||'í•µì‹¬ ê°œë… ë³µìŠµê³¼ ìœ ì‚¬ ë¬¸í•­ ë°˜ë³µ ì—°ìŠµì„ ê¶Œì¥í•©ë‹ˆë‹¤.';
        return `<li style="margin:6px 0"><strong>${k}</strong> (${m.label}) â€” <span class="pill" style="${statusColor(v)}">${scoreLabel(v)}</span><br><span class="muted">ì²˜ë°©: ${tip}</span></li>`;
      }).join('') || '<li class="muted">ì§‘ì¤‘ ë³´ì™„ì´ í•„ìš”í•œ ì˜ì—­ì´ ì—†ìŠµë‹ˆë‹¤. ì˜í•˜ê³  ìˆì–´ìš”!</li>';
    }

    function init() {
        const printBtn = document.getElementById('printBtn');
        if (printBtn) printBtn.addEventListener('click', () => window.print());
        
        document.body.addEventListener('click', (e) => {
            const btn = e.target.closest('.view-btn');
            if (!btn) return;
            document.querySelectorAll('.view-btn').forEach(b => {
                b.classList.remove('active');
                b.setAttribute('aria-pressed', 'false');
            });
            btn.classList.add('active');
            btn.setAttribute('aria-pressed', 'true');
            currentView = btn.dataset.view || 'all';
            render();
        });

        if (searchEl) searchEl.addEventListener('input', render);
        render();
    }
    
    document.addEventListener('DOMContentLoaded', init);
  })();
  </script>
</body>
</html>