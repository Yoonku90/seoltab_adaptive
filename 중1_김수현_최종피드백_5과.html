<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì¤‘1_ê¹€ìˆ˜í˜„ í•™ìƒ Â· ë‚´ì‹  í•™ìŠµ ì§€ì‹ë§µ (2025-09-18)</title>
  <style>
   :root{
   --bg: #f6f7fb; --card:#ffffff; --border:#e6e8ef; --text:#0f172a; --muted:#64748b;
   --indigo:#4f46e5; --green:#16a34a; --yellow:#f59e0b; --red:#ef4444; --blue:#3b82f6;
   --green-100:#dcfce7; --yellow-100:#fef9c3; --red-100:#fee2e2; --gray-100:#f1f5f9; --blue-100:#dbeafe;
   }
   *{box-sizing:border-box} body{margin:0;background:linear-gradient(180deg,#ffffff, var(--bg));color:var(--text);font-family: ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Apple SD Gothic Neo,Pretendard,Helvetica,Arial,sans-serif}
   .container{max-width:1120px;margin:0 auto;padding:24px}
   .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center;}
   .between{display:flex;align-items:center;justify-content:space-between;gap:12px}
   .card{background:var(--card);border:1px solid var(--border);border-radius:20px;box-shadow:0 4px 12px rgba(15,23,42,.04)}
   .p-16{padding:16px}.p-20{padding:20px}.p-24{padding:24px}
   .btn{border:1px solid var(--border);background:#fff;border-radius:12px;padding:10px 14px;cursor:pointer}
   .btn.active{background:var(--indigo);color:#fff;border-color:var(--indigo)}
   .input{border:1px solid var(--border);background:#fff;border-radius:12px;padding:10px 12px;min-width:260px}
   .grid{display:grid;gap:16px}
   @media(min-width:640px){.grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}}
   @media(min-width:1024px){.grid-3{grid-template-columns:repeat(3,minmax(0,1fr));}}
   .stat{min-width:240px}
   .hbar{height:8px;background:var(--gray-100);border-radius:999px;overflow:hidden}
   .hbar > span{display:block;height:100%}
   .pill{padding:3px 8px;border-radius:999px;font-size:11px;font-weight:700;display:inline-block}
   .legend .pill{border:1px solid var(--border);}
   .muted{color:var(--muted)}
   .title{font-weight:800;letter-spacing:-.3px}
   .sub{font-size:12px}
   .kc-card{display:flex;gap:12px}
   .kc-ico{flex:0 0 auto;width:36px;height:36px;border-radius:12px;background:#f8fafc;display:grid;place-items:center;border:1px solid var(--border)}
   .small{font-size:12px}
   .type-card{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
   .kbd{font-variant-numeric:tabular-nums}
   .footer{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:flex-start}
   .feedback-section h3 { font-size: 20px; margin: 0 0 16px 0; display: flex; align-items: center; gap: 8px; }
   .feedback-section h4 { font-size: 16px; margin: 24px 0 8px 0; color: var(--indigo); border-left: 3px solid var(--indigo); padding-left: 8px;}
   .feedback-section .summary { font-size: 14px; color: var(--muted); margin-top: -12px; margin-bottom: 24px; }
   .feedback-section hr { border: 0; border-top: 1px solid var(--border); margin: 24px 0; }
   .feedback-section blockquote { margin: 12px 0; padding: 12px; background-color: var(--gray-100); border-left: 4px solid var(--border); border-radius: 8px; font-size: 13px; }
   .feedback-section .analysis { margin-top: 8px; }
   .feedback-section .analysis strong { color: var(--text); }
   .feedback-section code { background-color: var(--border); padding: 2px 6px; border-radius: 4px; font-size: 12px; color: var(--indigo); }
  </style>
</head>
<body>
  <div class="container">
    <div class="between" style="gap:16px;flex-wrap:wrap">
      <div>
        <div id="mainTitle" class="title" style="font-size:24px">5ê³¼. Think like Sherlock Holmes! <span style="color:var(--indigo)">KC & ìœ í˜• ì„±ì·¨ë„</span> ëŒ€ì‹œë³´ë“œ</div>
        <div id="subHeader" class="sub muted">ì´ë¦„: <strong>ì¤‘1_ê¹€ìˆ˜í˜„</strong> Â· ì‹œí—˜ì¼: <strong>2025-09-18</strong> Â· êµì¬: ë™ì•„(ìœ¤ì •ë¯¸)</div>
      </div>
      <div class="row">
        <button id="printBtn" class="btn">ë‚´ë³´ë‚´ê¸°/ì¸ì‡„</button>
      </div>
    </div>

    <div class="row" style="margin-top:16px;align-items:center">
      <div class="row">
        <button data-view="all" class="btn view-btn active" aria-pressed="true">ì „ì²´</button>
        <button data-view="core" class="btn view-btn" aria-pressed="false">ê¸°ë°˜</button>
        <button data-view="dialogue" class="btn view-btn" aria-pressed="false">ëŒ€í™”ë¬¸</button>
        <button data-view="reading" class="btn view-btn" aria-pressed="false">ë³¸ë¬¸</button>
        <button data-view="types" class="btn view-btn" aria-pressed="false">ë¬¸ì œ ìœ í˜•</button>
        <button data-view="feedback" class="btn view-btn" aria-pressed="false">í”¼ë“œë°±</button>
      </div>
      <div style="flex:1"></div>
      <input id="search" class="input" placeholder="KC ì½”ë“œ/ì´ë¦„/ì„¤ëª…/ìœ í˜• ê²€ìƒ‰" />
    </div>

    <div class="grid grid-3" style="margin-top:16px">
      <div class="card p-16 stat">
        <div class="muted small">KC í‰ê·  ì„±ì·¨ë„</div>
        <div id="avgKC" class="title" style="font-size:22px;margin-top:4px">â€”</div>
        <div class="hbar" style="margin-top:8px"><span id="avgKCBar" style="width:0"></span></div>
      </div>
      <div class="card p-16 stat">
        <div class="muted small">ë¬¸ì œ ìœ í˜• í‰ê·  ì„±ì·¨ë„</div>
        <div id="avgType" class="title" style="font-size:22px;margin-top:4px">â€”</div>
        <div class="hbar" style="margin-top:8px"><span id="avgTypeBar" style="width:0"></span></div>
      </div>
       <div class="card p-16 stat">
        <div class="muted small">ë¬¸ì œ ì •ë‹µë¥ </div>
        <div class="row" style="align-items:baseline;gap:6px">
          <div id="avgCorrectRate" class="title" style="font-size:22px;margin-top:4px">â€”</div>
          <div id="totalCount" class="muted" style="font-weight:600; font-size: 14px;"></div>
        </div>
        <div class="hbar" style="margin-top:8px"><span id="avgCorrectRateBar" style="width:0"></span></div>
      </div>
    </div>

    <div class="legend row card p-16" style="margin-top:16px">
      <div class="muted small">ë²”ë¡€:</div>
      <span class="pill" style="background:var(--green-100);color:var(--green)">ìš°ìˆ˜ â‰¥ 85%</span>
      <span class="pill" style="background:var(--yellow-100);color:var(--yellow)">60â€“84%</span>
      <span class="pill" style="background:var(--red-100);color:var(--red)">1â€“59%</span>
      <span class="pill" style="background:#e5e7eb;color:#374151">ë¯¸í‰ê°€</span>
    </div>

    <div id="mount"></div>

    <section class="card p-20" style="margin-top:16px" id="focusBox">
      <div class="between">
        <div>
          <div class="title" style="font-size:18px">ğŸ“Œ ì§‘ì¤‘ ë³´ì™„ ì˜ì—­ (ìƒìœ„ 3ê°œ KC)</div>
          <div class="sub muted">ì ìˆ˜ê°€ ë‚®ì€ ìˆœìœ¼ë¡œ ìë™ ì¶”ì²œ</div>
        </div>
      </div>
      <ol id="focusList" class="small" style="margin-top:8px;padding-left:18px"></ol>
    </section>

    <div class="footer" style="margin-top:16px">
      <span>ìƒ‰ìƒ ê¸°ì¤€: ğŸŸ¢ 85% ì´ìƒ, ğŸŸ¡ 60â€“84%, ğŸŸ¥ 1â€“59%, íšŒìƒ‰=ë¯¸í‰ê°€. ê²€ìƒ‰ ë˜ëŠ” ìƒë‹¨ ë²„íŠ¼ìœ¼ë¡œ ë·°ë¥¼ ì „í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ì‡„ ë²„íŠ¼ìœ¼ë¡œ PDF ì €ì¥ ê°€ëŠ¥.</span>
    </div>
  </div>

  <script>
  (() => { 'use strict';
    // ======== ë°ì´í„° ì„¤ì • ========
    const studentName = "ì¤‘1_ê¹€ìˆ˜í˜„";
    const examDate = "2025-09-18";

    const kcScores = {
        "KC-5C1": { score: 83.0, correct: 20, total: 24 },
        "KC-5C2": { score: 87.8, correct: 35, total: 40 },
        "KC-5D1": { score: 100.0, correct: 10, total: 10 },
        "KC-5D2": { score: 84.6, correct: 7, total: 8 },
        "KC-5D3": { score: 100.0, correct: 8, total: 8 },
        "KC-5D4": { score: 87.1, correct: 6, total: 7 },
        "KC-5D5": { score: 100.0, correct: 12, total: 12 },
        "KC-5G1": { score: 39.2, correct: 20, total: 45 },
        "KC-5G2": { score: 65.6, correct: 30, total: 43 },
        "KC-5R1": { score: 68.3, correct: 13, total: 21 },
        "KC-5R2": { score: 73.3, correct: 28, total: 41 },
        "KC-5R3": { score: 75.1, correct: 45, total: 63 },
        "KC-5R4": { score: 64.0, correct: 19, total: 34 },
        "KC-5R5": { score: 89.8, correct: 38, total: 46 },
        "KC-5R6": { score: 86.4, correct: 5, total: 6 },
        "KC-5V1": { score: 83.2, correct: 27, total: 35 }
    };

    const typeScores = [
        { code: "111", name: "í•µì‹¬ ë‚´ìš© íŒŒì•…í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 93.6, kcs: ["KC-5C1", "KC-5C2", "KC-5D2"], correct: 8, total: 9 },
        { code: "112", name: "ì„¸ë¶€ ë‚´ìš© íŒŒì•…í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 100.0, kcs: ["KC-5D3", "KC-5D4"], correct: 6, total: 6 },
        { code: "113", name: "ì§€ë¬¸ ìš”ì•½í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 100.0, kcs: ["KC-5D1"], correct: 1, total: 1 },
        { code: "121", name: "ë¬¸ë§¥ íŒŒì•…í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 72.7, kcs: ["KC-5C1", "KC-5C2", "KC-5D1", "KC-5D3"], correct: 8, total: 11 },
        { code: "122", name: "ìˆœì„œ ë°°ì—´í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 89.5, kcs: ["KC-5D5"], correct: 8, total: 9 },
        { code: "124", name: "ë¹ˆì¹¸ ì¶”ë¡ í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 100.0, kcs: ["KC-5C1"], correct: 2, total: 2 },
        { code: "131", name: "ì˜ë¯¸ íŒŒì•…í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 100.0, kcs: ["KC-5V1"], correct: 5, total: 5 },
        { code: "132", name: "ì˜ì˜í’€ì´ ì•Œê¸°", area: "ëŒ€í™”ë¬¸", score: 40.0, kcs: ["KC-5V1"], correct: 1, total: 4 },
        { code: "141", name: "í•´ì„ ë° ì§ˆë¬¸ì— ë‹µí•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 100.0, kcs: ["KC-5C1"], correct: 3, total: 3 },
        { code: "142", name: "ì˜ì‘í•˜ê¸°", area: "ëŒ€í™”ë¬¸", score: 100.0, kcs: ["KC-5C2"], correct: 15, total: 15 },
        { code: "241", name: "ë¬¸ì¥ ì „í™˜í•˜ê¸°", area: "ë¬¸ë²•/ì–´ë²•", score: 86.7, kcs: ["KC-5G1"], correct: 3, total: 4 },
        { code: "242", name: "ì˜ì‘í•˜ê¸°", area: "ë¬¸ë²•/ì–´ë²•", score: 75.9, kcs: ["KC-5G1", "KC-5G2"], correct: 10, total: 13 },
        { code: "251", name: "ì˜³ê³  ê·¸ë¦„ íŒë‹¨í•˜ê¸°", area: "ë¬¸ë²•/ì–´ë²•", score: 43.3, kcs: ["KC-5G1", "KC-5G2", "KC-5R1"], correct: 21, total: 43 },
        { code: "252", name: "ì“°ì„ êµ¬ë¶„í•˜ê¸°", area: "ë¬¸ë²•/ì–´ë²•", score: 100.0, kcs: ["KC-5G1"], correct: 2, total: 2 },
        { code: "253", name: "ë¹ˆì¹¸ì— ì ì ˆí•œ ê²ƒ ê³ ë¥´ê¸°", area: "ë¬¸ë²•/ì–´ë²•", score: 51.8, kcs: ["KC-5G1"], correct: 10, total: 19 },
        { code: "311", name: "í•µì‹¬ ë‚´ìš© íŒŒì•…í•˜ê¸°", area: "ë³¸ë¬¸", score: 88.9, kcs: ["KC-5R1", "KC-5R4"], correct: 10, total: 11 },
        { code: "312", name: "ì„¸ë¶€ ë‚´ìš© íŒŒì•…í•˜ê¸°", area: "ë³¸ë¬¸", score: 60.1, kcs: ["KC-5R2", "KC-5R3", "KC-5R4", "KC-5R5"], correct: 21, total: 32 },
        { code: "313", name: "ê´€ë ¨ ë‚´ìš© íŒŒì•…í•˜ê¸°", area: "ë³¸ë¬¸", score: 33.3, kcs: ["KC-5R3"], correct: 1, total: 2 },
        { code: "314", name: "ì§€ë¬¸ ìš”ì•½í•˜ê¸°", area: "ë³¸ë¬¸", score: 78.9, kcs: ["KC-5R5", "KC-5R6"], correct: 6, total: 8 },
        { code: "321", name: "ë¬¸ë§¥ íŒŒì•…í•˜ê¸°", area: "ë³¸ë¬¸", score: 88.9, kcs: ["KC-5R3", "KC-5R5"], correct: 8, total: 9 },
        { code: "322", name: "íë¦„ ì¶”ë¡ í•˜ê¸°", area: "ë³¸ë¬¸", score: 51.0, kcs: ["KC-5R2", "KC-5R3"], correct: 6, total: 11 },
        { code: "323", name: "ë‚´ìš© ì¶”ë¡ í•˜ê¸°", area: "ë³¸ë¬¸", score: 81.8, kcs: ["KC-5R3", "KC-5R4"], correct: 6, total: 7 },
        { code: "324", name: "ë°‘ì¤„ ì¹œ ë¶€ë¶„ ì¶”ë¡ í•˜ê¸°", area: "ë³¸ë¬¸", score: 100.0, kcs: ["KC-5R5"], correct: 7, total: 7 },
        { code: "325", name: "ë¹ˆì¹¸ ì¶”ë¡ í•˜ê¸°", area: "ë³¸ë¬¸", score: 79.2, kcs: ["KC-5R5"], correct: 5, total: 6 },
        { code: "331", name: "ì˜ë¯¸ íŒŒì•…í•˜ê¸°", area: "ë³¸ë¬¸", score: 77.8, kcs: ["KC-5V1"], correct: 2, total: 3 },
        { code: "332", name: "ì˜ì˜í’€ì´ ì•Œê¸°", area: "ë³¸ë¬¸", score: 63.6, kcs: ["KC-5V1"], correct: 3, total: 4 },
        { code: "333", name: "ì–´íœ˜ì˜ ê´€ê³„ ë° í™œìš©", area: "ë³¸ë¬¸", score: 100.0, kcs: ["KC-5V1"], correct: 1, total: 1 },
        { code: "341", name: "ìš°ë¦¬ë§ë¡œ í‘œí˜„í•˜ê¸°", area: "ë³¸ë¬¸", score: 95.9, kcs: ["KC-5R2", "KC-5R3"], correct: 24, total: 25 },
        { code: "342", name: "ì˜ì–´ë¡œ í‘œí˜„í•˜ê¸°", area: "ë³¸ë¬¸", score: 81.8, kcs: ["KC-5R4"], correct: 4, total: 5 }
    ];
    
    const totalCorrectAll = typeScores.reduce((sum, t) => sum + (t.correct || 0), 0);
    const totalProblemsAll = typeScores.reduce((sum, t) => sum + (t.total || 0), 0);

    const kcMeta = {
        "KC-5C1": { area: "ì˜ì‚¬ì†Œí†µ", label: "í—ˆë½ êµ¬í•˜ê¸° (May I ~?)", desc: "ìƒëŒ€ë°©ì—ê²Œ í—ˆë½ì„ êµ¬í•˜ê³  ë‹µí•˜ëŠ” í‘œí˜„" },
        "KC-5C2": { area: "ì˜ì‚¬ì†Œí†µ", label: "ê¸ˆì§€í•˜ê¸° (must not / don't)", desc: "ê°•í•œ ê¸ˆì§€ì™€ ë¶€ì •ëª…ë ¹ë¬¸ í‘œí˜„" },
        "KC-5G1": { area: "ë¬¸ë²•", label: "ë¹„êµê¸‰ê³¼ ìµœìƒê¸‰", desc: "ë‘ ëŒ€ìƒ ë¹„êµ(-er than)ì™€ ì…‹ ì´ìƒ ì¤‘ ìµœê³ (the -est)" },
        "KC-5G2": { area: "ë¬¸ë²•", label: "There is / There are êµ¬ë¬¸", desc: "ì¡´ì¬ë¥¼ ë‚˜íƒ€ë‚´ëŠ” There is/are/was/were" },
        "KC-5V1": { area: "ì–´íœ˜", label: "í•µì‹¬ ì–´íœ˜ í™œìš©", desc: "eyewitness, criminal, scene ë“± í•µì‹¬ ë‹¨ì–´" },
        "KC-5D1": { area: "ëŒ€í™”ë¬¸", label: "ê¸ˆì§€ì™€ ë¶ˆí•„ìš” êµ¬ë¶„", desc: "must not talk (ê¸ˆì§€)ì™€ donâ€™t have to (ë¶ˆí•„ìš”) ì°¨ì´" },
        "KC-5D2": { area: "ëŒ€í™”ë¬¸", label: "í—ˆë½ ê±°ì ˆ", desc: "May I touch ~?ì— ëŒ€í•œ ê±°ì ˆê³¼ ê¸ˆì§€ ì´ìœ  ì„¤ëª…" },
        "KC-5D3": { area: "ëŒ€í™”ë¬¸", label: "í—ˆë½ê³¼ ê¸ˆì§€", desc: "May I go ~? ìˆ˜ë½ê³¼ don't run ê¸ˆì§€ ëª…ë ¹" },
        "KC-5D4": { area: "ëŒ€í™”ë¬¸", label: "êµ¬ì²´ì  í—ˆë½/ê¸ˆì§€", desc: "ìŒì‹ë¬¼ ë°˜ì… ê¸ˆì§€ì™€ íŠ¹ì • í’ˆëª© í—ˆìš©" },
        "KC-5D5": { area: "ëŒ€í™”ë¬¸", label: "ë©”ì¸(ë°•ë¬¼ê´€ ëŒ€í™”)", desc: "ì‚¬ì§„ ì´¬ì˜ í—ˆë½ê³¼ í”Œë˜ì‹œ ì‚¬ìš© ê¸ˆì§€" },
        "KC-5R1": { area: "ë³¸ë¬¸", label: "ì‚¬ê±´ ê°œìš” íŒŒì•…", desc: "ëª¨ë‚˜ë¦¬ì ì¼€ì´í¬ íˆ¬ì²™ ì‚¬ê±´ì˜ ê¸°ë³¸ ì •ë³´" },
        "KC-5R2": { area: "ë³¸ë¬¸", label: "ëª©ê²©ì 1 (Ann) ì§„ìˆ ", desc: "ë²”ì¸ì˜ í‚¤ì— ëŒ€í•œ ë‹¨ì„œ(taller than me) íŒŒì•…" },
        "KC-5R3": { area: "ë³¸ë¬¸", label: "ëª©ê²©ì 2 (Carlos) ì§„ìˆ ", desc: "ê°€ë°œ ì“´ ì Šì€ ë‚¨ì, ì†ë„ ë‹¨ì„œ(faster than me) íŒŒì•…" },
        "KC-5R4": { area: "ë³¸ë¬¸", label: "ëª©ê²©ì 3 (Diego) ì§„ìˆ ", desc: "í˜„ì¥ ìƒí™© ë¬˜ì‚¬ì™€ ì¼€ì´í¬ ìƒì ë‹¨ì„œ íŒŒì•…" },
        "KC-5R5": { area: "ë³¸ë¬¸", label: "ëª©ê²©ì 4 (Camila) ì§„ìˆ ", desc: "ë²”ì¸ì˜ íŠ¹ì§•(ì˜ì–´, íŒŒë€ ëˆˆ, ì‘ì€ ì¼€ì´í¬) íŒŒì•…" },
        "KC-5R6": { area: "ë³¸ë¬¸", label: "ì¢…í•©ì  ì¶”ë¡ ", desc: "ëª¨ë“  ì§„ìˆ ì„ ì¢…í•©í•˜ì—¬ ìš©ì˜ì ëª©ë¡ì—ì„œ ë²”ì¸ ì°¾ê¸°" }
    };
    const groups = [
      { id: "core", title: "A. ê¸°ë°˜ ì§€ì‹", subtitle: "ì˜ì‚¬ì†Œí†µÂ·ë¬¸ë²•Â·ì–´íœ˜ ê¸°ë°˜", items:["KC-5C1","KC-5C2","KC-5G1","KC-5G2","KC-5V1"] },
      { id: "dialogue", title: "B-1. ì ìš© Â· ëŒ€í™”ë¬¸", subtitle: "ì‹¤ì œ ëŒ€í™” ìƒí™© ì´í•´", items:["KC-5D1","KC-5D2","KC-5D3","KC-5D4","KC-5D5"] },
      { id: "reading", title: "B-2. ì ìš© Â· ë³¸ë¬¸", subtitle: "Think like Sherlock Holmes!", items:["KC-5R1","KC-5R2","KC-5R3","KC-5R4", "KC-5R5", "KC-5R6"] }
    ];
    
    function getFeedbackHTML() { 
      return `
      <h3>ğŸ“Š ìƒì„¸ ë¶„ì„ ë° ë§ì¶¤ í”¼ë“œë°±</h3>
      <hr>
      <h4>âœï¸ ë¬¸ë²•: ê·œì¹™ì€ ì•Œì§€ë§Œ, ì ìš©ì€ ì–´ë ¤ìš´ ìƒíƒœ</h4>
      <p class="summary">
        <strong>í•µì‹¬ ì•½ì : ë¹„êµê¸‰/ìµœìƒê¸‰(KC-5G1, ì„±ì·¨ë„ 39.2%)</strong>ê³¼ <strong>There is/are êµ¬ë¬¸(KC-5G2, ì„±ì·¨ë„ 65.6%)</strong> ê°™ì€ í•µì‹¬ ë¬¸ë²• ì§€ì‹ì„ ì‹¤ì œ ë¬¸ì¥ì—ì„œ ê°€ë ¤ë‚´ëŠ” ëŠ¥ë ¥ì´ ë¶€ì¡±í•©ë‹ˆë‹¤. íŠ¹íˆ ì—¬ëŸ¬ ë¬¸ë²• ê·œì¹™ì´ ì„ì—¬ ìˆëŠ” ë³µí•© ë¬¸ì œì—ì„œ ì •ë‹µì„ ì°¾ëŠ” ë° ì–´ë ¤ì›€ì„ ê²ªìœ¼ë©°, ì´ëŠ” <strong>ë¬¸ë²•ì„± íŒë‹¨ ìœ í˜•(ìœ í˜• 251)</strong>ì˜ ë‚®ì€ ì •ë‹µë¥ (<strong>43.3%</strong>)ë¡œ ì´ì–´ì§€ê³  ìˆìŠµë‹ˆë‹¤.
      </p>
      <blockquote>
        <p><strong>ëŒ€í‘œ ë¬¸ì œ ì˜ˆì‹œ (Finalëª¨ì˜ê³ ì‚¬ 27ë²ˆ)</strong></p>
        <p><strong>[ë¬¸ì œ]</strong> 27. ë‹¤ìŒ (A)~(E) ë¬¸ì¥ì— ëŒ€í•´ ì–´ë²•ìƒ ì˜¬ë°”ë¥´ê²Œ ì„¤ëª…í•œ í•™ìƒì€ ëª¨ë‘ ëª‡ ëª…ì¸ê°€?<br>
        (A) She sings best than her classmates. (B) My brother is quieter than me at home. (C) He is the fatest cat in the neighborhood. (D) The exam was difficulter than I expected. (E) That was most exciting moment of the game.</p>
        <p><strong>[í•™ìƒë“¤ì˜ ì„¤ëª…]</strong><br>
        - ìˆ˜ì—°: (A)ëŠ” thanì´ ì‚¬ìš©ëœ ë¹„êµê¸‰ ë¬¸ì¥ì´ë¯€ë¡œ ... bestë¥¼ ... betterë¡œ ê³ ì³ì•¼ í•´.<br>
        - ë¯¼í˜•: (B)ëŠ” ... í˜•ìš©ì‚¬ quietê°€ ë¹„êµê¸‰ìœ¼ë¡œ í™œìš©ëœ ì–´ë²•ìƒ ì˜³ì€ ë¬¸ì¥ì´ì•¼.<br>
        - í•˜ë¯¼: (C)ì—ì„œ the fatestëŠ” í˜•ìš©ì‚¬ fatì˜ ìµœìƒê¸‰ìœ¼ë¡œ ì–´ë²•ìƒ ì˜³ì•„.<br>
        - í˜„ì•„: (D)ì—ì„œ difficultëŠ” 3ìŒì ˆ ì´ìƒì˜ ë‹¨ì–´ì´ë¯€ë¡œ difficulter more difficultë¡œ ê³ ì³ì•¼ í•´.<br>
        - ì¸ê·œ: (E)ëŠ” excitingì€ 3ìŒì ˆ ì´ìƒì˜ ë‹¨ì–´ì´ë¯€ë¡œ ìµœìƒê¸‰ ì•ì— mostê°€ ë¶™ì€ ì–´ë²•ìƒ ì˜³ì€ ë¬¸ì¥ì´ì•¼.</p>
        <p><strong>[ì„ íƒì§€]</strong> â‘  1ëª… â‘¡ (ì •ë‹µ) 2ëª… â‘¢ 3ëª… â‘£ 4ëª… â‘¤ 5ëª…</p>
        <p>â¡ï¸ <strong>í•™ìƒ ë‹µì•ˆ: â‘£ë²ˆ (4ëª…)</strong></p>
      </blockquote>
      <p class="analysis"><strong>ë¶„ì„:</strong> ì •ë‹µì€ â‘¡ë²ˆ(ìˆ˜ì—°, í˜„ì•„)ì´ì§€ë§Œ, í•™ìƒì€ â‘£ë²ˆ(4ëª…)ì„ ê³¨ëìŠµë‹ˆë‹¤. ì´ëŠ” ìˆ˜ì—°, í˜„ì•„ì˜ ì„¤ëª…ì´ ì˜³ë‹¤ëŠ” ê²ƒì€ íŒŒì•…í–ˆì§€ë§Œ, <strong>ë¯¼í˜•ê³¼ ì¸ê·œì˜ ì„¤ëª…ê¹Œì§€ ë§ë‹¤ê³  íŒë‹¨</strong>í•œ ì•„ì‰¬ìš´ ì‹¤ìˆ˜ì…ë‹ˆë‹¤.<br>
      - <strong>ë¯¼í˜•</strong>ì˜ ì„¤ëª…ì€ ë§ìŠµë‹ˆë‹¤. <code>quieter</code>ëŠ” <code>quiet</code>ì˜ ì˜¬ë°”ë¥¸ ë¹„êµê¸‰ í˜•íƒœì…ë‹ˆë‹¤.<br>
      - í•˜ì§€ë§Œ <strong>ì¸ê·œ</strong>ì˜ ì„¤ëª…ì€ ê²°ì •ì ì¸ ë¶€ë¶„ì„ ë†“ì³¤ìŠµë‹ˆë‹¤. <code>exciting</code>ì˜ ìµœìƒê¸‰ì´ <code>most exciting</code>ì¸ ê²ƒì€ ë§ì§€ë§Œ, ìµœìƒê¸‰ ì•ì—ëŠ” <strong>ë°˜ë“œì‹œ ì •ê´€ì‚¬ 'the'</strong>ê°€ ë¶™ì–´ì•¼ í•©ë‹ˆë‹¤. (E) ë¬¸ì¥ì—ëŠ” 'the'ê°€ ë¹ ì ¸ ìˆìœ¼ë¯€ë¡œ ì–´ë²•ìƒ í‹€ë ¸ê³ , ë”°ë¼ì„œ ì¸ê·œì˜ ì„¤ëª…("ì–´ë²•ìƒ ì˜³ì€ ë¬¸ì¥ì´ì•¼")ë„ í‹€ë ¸ìŠµë‹ˆë‹¤. ì´ì²˜ëŸ¼ <strong>ìµœìƒê¸‰ ì•ì˜ 'the'</strong> ì™€ ê°™ì´ ì‚¬ì†Œí•´ ë³´ì´ì§€ë§Œ í•µì‹¬ì ì¸ ê·œì¹™ì„ ëê¹Œì§€ í™•ì¸í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤.
      </p>
      <hr>
      <h4>ğŸ“š ë³¸ë¬¸ ë…í•´: 'í•µì‹¬ ë‹¨ì„œ'ë¥¼ ë†“ì¹˜ëŠ” ìƒíƒœ</h4>
      <p class="summary">
        ê¸€ì˜ ì „ë°˜ì ì¸ ë‚´ìš©ì€ ì´í•´í•˜ì§€ë§Œ, ì—¬ëŸ¬ ëª©ê²©ìì˜ ì§„ìˆ ì²˜ëŸ¼ <strong>ë¶„ì‚°ëœ ì •ë³´ë¥¼ ì¢…í•©í•˜ì—¬ ë‹µì„ ì°¾ì•„ì•¼ í•  ë•Œ</strong> ê²°ì •ì ì¸ ë‹¨ì„œë¥¼ ë†“ì¹˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. íŠ¹íˆ <strong>ë‚´ìš© ì¼ì¹˜/ë¶ˆì¼ì¹˜(ìœ í˜• 312, ì„±ì·¨ë„ 60.1%)</strong>ì™€ <strong>ê¸€ì˜ ìˆœì„œ ë°°ì—´(ìœ í˜• 322, ì„±ì·¨ë„ 51.0%)</strong> ìœ í˜•ì—ì„œ ì•½ì ì„ ë³´ì…ë‹ˆë‹¤.
      </p>
      <blockquote>
        <p><strong>ëŒ€í‘œ ë¬¸ì œ ì˜ˆì‹œ (Finalëª¨ì˜ê³ ì‚¬ 20ë²ˆ)</strong></p>
        <p><strong>[ì§€ë¬¸]</strong> (Carlos Diazì˜ ì§„ìˆ ) ... the old man was not old. He was a young man with long brown hair. (Diego Perezì˜ ì§„ìˆ ) ... I found a cake box next to the wheelchair. The box was from Camila's Bakery. (Camila Santosì˜ ì§„ìˆ ) ... Last Friday, a young man came in. I spoke to him in Spanish, but he didn't understand me. He spoke only English.</p>
        <p><strong>[ë¬¸ì œ]</strong> 20. ë‹¤ìŒ ê¸€ì„ ì½ê³  ë‹µí•  ìˆ˜ ìˆëŠ” ì§ˆë¬¸ì€ &lt;ë³´ê¸°&gt;ì—ì„œ ëª‡ ê°œì¸ê°€?<br>
        &lt;ë³´ê¸°&gt; (a) Who found the cake box? (b) Where is Camila's bakery? (c) Where was the wheelchair? (d) What was the color of the wig? (e) How old was the old man actually?</p>
        <p><strong>[ì„ íƒì§€]</strong> â‘  1ê°œ â‘¡ 2ê°œ â‘¢ (ì •ë‹µ) 3ê°œ â‘£ 4ê°œ â‘¤ 5ê°œ</p>
        <p>â¡ï¸ <strong>í•™ìƒ ë‹µì•ˆ: â‘£ë²ˆ (4ê°œ)</strong></p>
      </blockquote>
      <p class="analysis"><strong>ë¶„ì„:</strong> ì •ë‹µì€ â‘¢ë²ˆ(3ê°œ)ì´ì§€ë§Œ, í•™ìƒì€ â‘£ë²ˆ(4ê°œ)ì„ ì„ íƒí–ˆìŠµë‹ˆë‹¤. ì´ëŠ” ë‹µí•  ìˆ˜ ìˆëŠ” ì§ˆë¬¸ 3ê°œ((a), (c), (d)) ì™¸ì— <strong>ë‹µí•  ìˆ˜ ì—†ëŠ” ì§ˆë¬¸ í•˜ë‚˜ë¥¼ ë” ê°€ëŠ¥í•˜ë‹¤ê³  íŒë‹¨</strong>í•œ ê²ƒì…ë‹ˆë‹¤.<br>
      - <strong>(b) ì¹´ë°€ë¼ ë¹µì§‘ì˜ ìœ„ì¹˜</strong>: ë³¸ë¬¸ì—ëŠ” ì¼€ì´í¬ ìƒìê°€ 'Camila's Bakery'ì—ì„œ ì™”ë‹¤ëŠ” ì •ë³´ë§Œ ìˆì„ ë¿, ê·¸ ë¹µì§‘ì´ <strong>ì–´ë””ì— ìˆëŠ”ì§€</strong>ëŠ” ì „í˜€ ì–¸ê¸‰ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.<br>
      - <strong>(e) ë…¸ì¸ì˜ ì‹¤ì œ ë‚˜ì´</strong>: ë³¸ë¬¸ì—ì„œ 'a young man'ì´ë¼ê³  í–ˆì„ ë¿, <strong>ì •í™•íˆ ëª‡ ì‚´ì¸ì§€</strong>ëŠ” ì•Œ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.<br>
      ì•„ë§ˆë„ (b) ë˜ëŠ” (e)ì— ëŒ€í•œ ì •ë³´ê°€ ê¸€ ì–´ë”˜ê°€ì— ìˆì„ ê²ƒì´ë¼ê³  ì§ì‘í•˜ê³  ë„˜ì–´ê°„ ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤. ë…í•´ ë¬¸ì œì—ì„œëŠ” <strong>ì§€ë¬¸ì— ëª…ì‹œëœ ì‚¬ì‹¤(fact)ë§Œì„ ê·¼ê±°</strong>ë¡œ ë‹µì„ ê³¨ë¼ì•¼ í•©ë‹ˆë‹¤. ê¸€ì— ì—†ëŠ” ë‚´ìš©ì„ ì¶”ì¸¡í•˜ê±°ë‚˜ ì„£ë¶ˆë¦¬ íŒë‹¨í•˜ì§€ ì•Šë„ë¡ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.
      </p>
      <hr>
      <h4>ğŸ“– ì–´íœ˜: 'ì •í™•í•œ ëœ»' íŒŒì•… ëŠ¥ë ¥ ë¶€ì¡±</h4>
      <p class="summary">
        ë‹¨ì–´ì˜ ëŒ€ëµì ì¸ ì˜ë¯¸ëŠ” ì•Œì§€ë§Œ, <strong>ì˜ì˜í’€ì´(ìœ í˜• 132, ì„±ì·¨ë„ 40.0%)</strong>ì²˜ëŸ¼ ì •í™•í•œ ì •ì˜ë¥¼ ë¬»ëŠ” ë¬¸ì œì— ì•½í•œ ëª¨ìŠµì„ ë³´ì…ë‹ˆë‹¤. ì´ëŠ” ë‹¨ì–´ë¥¼ ì•”ê¸°í•  ë•Œ ìœ ì˜ì–´ë‚˜ ë¬¸ë§¥ ì† ì˜ë¯¸ì—ë§Œ ì˜ì¡´í•˜ê³ , ê·¸ ë‹¨ì–´ê°€ ê°€ì§„ í•µì‹¬ì ì¸ ì •ì˜ë¥¼ ê¹Šì´ ìˆê²Œ í•™ìŠµí•˜ì§€ ì•Šì•˜ë‹¤ëŠ” ì˜ë¯¸ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
      <blockquote>
        <p><strong>ëŒ€í‘œ ë¬¸ì œ ì˜ˆì‹œ (Finalëª¨ì˜ê³ ì‚¬ 11ë²ˆ)</strong></p>
        <p><strong>[ë¬¸ì œ]</strong> 11. ë‹¤ìŒ ì¤‘ ë‹¨ì–´ì™€ ì˜ì˜í’€ì´ì˜ ì—°ê²°ì´ ì˜ëª»ëœ ê²ƒì€?</p>
        <p><strong>[ì„ íƒì§€]</strong><br>
        â‘  crime: an action that the law does not allow<br>
        â‘¡ rule: a statement of what you can or cannot do<br>
        â‘¢ criminal: a person who does something against the law<br>
        â‘£ (ì •ë‹µ) run: to leave a place or person secretly and suddenly<br>
        â‘¤ explain: to tell someone about something so that he or she can understand it</p>
        <p>â¡ï¸ <strong>í•™ìƒ ë‹µì•ˆ: â‘¡ë²ˆ</strong></p>
      </blockquote>
      <p class="analysis"><strong>ë¶„ì„:</strong> ì •ë‹µì€ â‘£ë²ˆì´ì§€ë§Œ, í•™ìƒì€ â‘¡ë²ˆì„ ê³¨ëìŠµë‹ˆë‹¤. â‘¡ë²ˆ <code>rule</code>(ê·œì¹™)ì˜ ì˜ì˜í’€ì´ëŠ” 'ë¬´ì—‡ì„ í•  ìˆ˜ ìˆê³  ì—†ëŠ”ì§€ì— ëŒ€í•œ ì§„ìˆ 'ë¡œ ì˜¬ë°”ë¥´ê²Œ ì—°ê²°ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
      í•™ìƒì´ ë†“ì¹œ <strong>â‘£ë²ˆ</strong>ì´ í‹€ë¦° ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.<br>
      - ì˜ì˜í’€ì´ 'to leave a place or person secretly and suddenly'ëŠ” 'ì¥ì†Œë‚˜ ì‚¬ëŒì„ ëª°ë˜ ê°‘ìê¸° ë– ë‚˜ë‹¤'ë¼ëŠ” ì˜ë¯¸ë¡œ, ì´ëŠ” ë‹¨ìˆœíˆ 'ë‹¬ë¦¬ë‹¤'ë¥¼ ëœ»í•˜ëŠ” <strong>run</strong>ì´ ì•„ë‹ˆë¼ <strong>'ë„ë§ì¹˜ë‹¤'ë¼ëŠ” ëœ»ì˜ 'run away'</strong>ì— ëŒ€í•œ ì„¤ëª…ì…ë‹ˆë‹¤. ë³¸ë¬¸ì—ë„ ë“±ì¥í•˜ëŠ” í•µì‹¬ í‘œí˜„ì¸ ë§Œí¼, ë‘ ë‹¨ì–´ì˜ ë¯¸ë¬˜í•œ ì˜ë¯¸ ì°¨ì´ë¥¼ ì •í™•íˆ êµ¬ë¶„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.
      </p>
      `; 
    }

    // ======== ë Œë”ë§ ë¡œì§ ========
    const mount = document.getElementById('mount');
    const searchEl = document.getElementById('search');
    const focusBox = document.getElementById('focusBox');
    let currentView = 'all';

    const thresholds = { excellent:85, ok:60 };
    const clamp = (n) => Math.max(0, Math.min(100, Number(n||0)));
    
    // A ê·œì¹™: í•­ìƒ ì†Œìˆ˜ 1ìë¦¬(100ë„ 100.0%)
    function scoreLabel(v){ 
      if(v==null) return 'ë¯¸í‰ê°€'; 
      const n = Number(v); 
      return n.toFixed(1) + '%'; 
    }
    function average(nums){ const vals = nums.filter(v => v!=null && !Number.isNaN(Number(v))); if(!vals.length) return null; return vals.reduce((a,b)=>a+Number(b),0)/vals.length; }
    function barColor(v){ if(v==null) return '#e5e7eb'; if(v>=thresholds.excellent) return 'var(--green)'; if(v>=thresholds.ok) return 'var(--yellow)'; return 'var(--red)'; }
    function statusColor(v){ if(v==null) return 'background:#e5e7eb;color:#374151'; if(v>=thresholds.excellent) return 'background:var(--green-100);color:var(--green)'; if(v>=thresholds.ok) return 'background:var(--yellow-100);color:var(--yellow)'; return 'background:var(--red-100);color:var(--red)';}

    function KCCard(id){
      const m = kcMeta[id]||{}; const v = kcScores[id] || {score:null, correct:0, total:0};
      const el = document.createElement('div');
      el.className = 'card p-16'; el.style.borderColor = '#e5e7eb';
      el.innerHTML = `
        <div class="kc-card">
          <div class="kc-ico">${m.area==='ì˜ì‚¬ì†Œí†µ'?'ğŸ’¬':m.area==='ë¬¸ë²•'?'âœï¸':m.area==='ì–´íœ˜'?'ğŸ”¤':m.area==='ëŒ€í™”ë¬¸'?'ğŸ’¬':'ğŸ“–'}</div>
          <div style="flex:1;min-width:0">
            <div class="row" style="align-items:center;gap:6px;flex-wrap:wrap">
              <span class="small" style="font-weight:700">${id}</span>
              <span class="pill" style="${statusColor(v.score)}">${scoreLabel(v.score)}</span>
            </div>
            <div class="row between">
                <div class="small" style="font-weight:700;margin-top:4px">${m.label||''}</div>
                <div class="small muted" style="margin-top:4px">(${v.correct}/${v.total})</div>
            </div>
            <div class="small muted" style="margin-top:2px">${m.desc||''}</div>
            <div class="hbar" style="margin-top:8px"><span style="width:${clamp(v.score||0)}%; background:${barColor(v.score)}"></span></div>
          </div>
        </div>
      `;
      return el;
    }

    function TypeCard(t){
      const el = document.createElement('div');
      el.className = 'card p-16';
      const related = (t.kcs||[]).map(k=>`${k} (${scoreLabel((kcScores[k]||{}).score)})`).join(' Â· ');
      el.innerHTML = `
        <div class="type-card">
          <div style="min-width:0">
            <div class="row" style="gap:6px;flex-wrap:wrap">
              <span class="small" style="font-weight:700">${t.name}</span>
              <span class="small muted">[${t.code}]</span>
              <span class="pill" style="background:#f3f4f6;color:#374151">${t.area}</span>
            </div>
            <div class="small muted" style="margin-top:4px">(${t.correct}/${t.total})</div>
            <div class="small muted" style="margin-top:4px">ì—°ê³„ KC: ${related}</div>
          </div>
          <div style="text-align:right;min-width:120px;flex-shrink:0;">
            <div style="font-weight:700">${scoreLabel(t.score)}</div>
            <div class="hbar" style="margin-top:6px"><span style="width:${clamp(t.score||0)}%; background:${barColor(t.score)}"></span></div>
          </div>
        </div>
      `;
      return el;
    }
    
    function renderFocus(){
      const list = document.getElementById('focusList');
      if (!list) return;
      const entries = Object.entries(kcScores)
        .filter(([k,v])=>v.score!=null && v.score < thresholds.excellent)
        .sort((a,b)=> (a[1].score-b[1].score) || (String((kcMeta[a[0]]||{}).area) > String((kcMeta[b[0]]||{}).area) ? 1 : -1))
        .slice(0,3);

      list.innerHTML = entries.map(([k,v])=>{
        const m = kcMeta[k]||{};
        return `<li style="margin:6px 0"><strong>${k}</strong> (${m.label||''}) â€” <span class="pill" style="${statusColor(v.score)}">${scoreLabel(v.score)}</span></li>`;
      }).join('') || '<li class="muted">ì§‘ì¤‘ ë³´ì™„ì´ í•„ìš”í•œ ì˜ì—­ì´ ì—†ìŠµë‹ˆë‹¤. ì˜í•˜ê³  ìˆì–´ìš”!</li>';
    }

    function render(){
        const q = (searchEl.value||'').trim().toLowerCase();
        mount.innerHTML = '';
        focusBox.style.display = currentView === 'feedback' ? 'none' : 'block';

        ['core','dialogue','reading'].forEach(id=>{
            if(!(currentView==='all' || currentView===id)) return;
            const g = groups.find(x=>x.id===id);
            if (!g) return;
            const items = g.items.filter(k=>{
                if(!q) return true;
                const m = kcMeta[k]||{};
                return k.toLowerCase().includes(q) || (m.label||'').toLowerCase().includes(q) || (m.desc||'').toLowerCase().includes(q) || (m.area||'').toLowerCase().includes(q);
            });
            if(!items.length) return;

            const sec = document.createElement('section');
            sec.className = 'card p-20'; sec.style.marginTop = '16px';
            const secTitle = id==='core'?'ğŸ§© '+g.title : (id==='dialogue'?'ğŸ’¬ '+g.title : 'ğŸ“– '+g.title);
            sec.innerHTML = `<div class="between"><div><div class="title" style="font-size:18px">${secTitle}</div><div class="sub muted">${g.subtitle}</div></div></div>`;
            const grid = document.createElement('div');
            grid.className = 'grid grid-2 grid-3'; grid.style.marginTop = '12px';
            items.forEach(k => grid.appendChild(KCCard(k)));
            sec.appendChild(grid);
            mount.appendChild(sec);
        });

        if(currentView==='all' || currentView==='types'){
            const filteredTypes = typeScores.filter(t=>{
                if(!q) return true;
                return (t.name+t.code+t.area+(t.kcs||[]).join(',')).toLowerCase().includes(q);
            });
            if(filteredTypes.length){
                const sec = document.createElement('section');
                sec.className = 'card p-20'; sec.style.marginTop = '16px';
                sec.innerHTML = `<div class="between"><div><div class="title" style="font-size:18px">ğŸ“ ë¬¸ì œ ìœ í˜• ì„±ì·¨ë„</div><div class="sub muted">ì´ ${totalProblemsAll}ë¬¸ì œ ì¤‘ ${totalCorrectAll}ë¬¸ì œ ì •ë‹µ</div></div></div>`;
                const grid = document.createElement('div');
                grid.className = 'grid grid-2'; grid.style.marginTop = '12px';
                filteredTypes.forEach(t => grid.appendChild(TypeCard(t)));
                sec.appendChild(grid);
                mount.appendChild(sec);
            }
        }

        if(currentView==='all' || currentView==='feedback'){
            const sec = document.createElement('section');
            sec.className = 'card p-24 feedback-section'; sec.style.marginTop = '16px';
            sec.innerHTML = getFeedbackHTML();
            mount.appendChild(sec);
        }
        
        const avgKCVal = average(Object.values(kcScores).map(k => k.score));
        document.getElementById('avgKC').textContent = scoreLabel(avgKCVal);
        document.getElementById('avgKCBar').style.width = clamp(avgKCVal) + '%';
        document.getElementById('avgKCBar').style.background = barColor(avgKCVal);

        const avgTypeVal = average(typeScores.map(t => t.score));
        document.getElementById('avgType').textContent = scoreLabel(avgTypeVal);
        document.getElementById('avgTypeBar').style.width = clamp(avgTypeVal) + '%';
        document.getElementById('avgTypeBar').style.background = barColor(avgTypeVal);
        
        const correctRateVal = totalProblemsAll > 0 ? (totalCorrectAll / totalProblemsAll) * 100 : null;
        document.getElementById('avgCorrectRate').textContent = scoreLabel(correctRateVal);
        document.getElementById('totalCount').textContent = `(${totalCorrectAll}/${totalProblemsAll})`;
        const correctRateBar = document.getElementById('avgCorrectRateBar');
        if (correctRateBar) {
            correctRateBar.style.width = clamp(correctRateVal) + '%';
            correctRateBar.style.background = barColor(correctRateVal);
        }
        renderFocus();
    }
    
    function init() {
        document.getElementById('printBtn').addEventListener('click', () => window.print());
        document.body.addEventListener('click', (e) => {
            const btn = e.target.closest('.view-btn');
            if(!btn) return;
            document.querySelectorAll('.view-btn').forEach(b => {
                b.classList.remove('active');
                b.setAttribute('aria-pressed', 'false');
            });
            btn.classList.add('active');
            btn.setAttribute('aria-pressed', 'true');
            currentView = btn.dataset.view || 'all';
            render();
        });
        searchEl.addEventListener('input', render);
        render();
    }

    document.addEventListener('DOMContentLoaded', init);
  })();
  </script>
</body>
</html>