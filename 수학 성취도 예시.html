<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì¤‘ë“± ìˆ˜í•™ Â· ì…ì²´ë„í˜• ì„±ì·¨ë„ ëŒ€ì‹œë³´ë“œ</title>
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --border:#e6e8ef; --text:#0f172a; --muted:#64748b;
      --indigo:#4f46e5; --green:#16a34a; --yellow:#f59e0b; --red:#ef4444; --blue:#3b82f6;
      --green-100:#dcfce7; --yellow-100:#fef9c3; --red-100:#fee2e2; --gray-100:#f1f5f9; --blue-100:#dbeafe;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:linear-gradient(180deg,#ffffff,var(--bg));
      color:var(--text);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,"Noto Sans KR",Apple SD Gothic Neo,Pretendard,Helvetica,Arial,sans-serif
    }
    .container{max-width:1120px;margin:0 auto;padding:24px}
    .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
    .between{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:20px;
      box-shadow:0 4px 12px rgba(15,23,42,.04)
    }
    .p-16{padding:16px}.p-20{padding:20px}.p-24{padding:24px}
    .btn{
      border:1px solid var(--border);
      background:#fff;
      border-radius:12px;
      padding:10px 14px;
      cursor:pointer;
      font-size:14px;
      line-height:1.2;
      font-weight:600;
      color:var(--text)
    }
    .btn.active{
      background:var(--indigo);
      color:#fff;
      border-color:var(--indigo)
    }
    .input{
      border:1px solid var(--border);
      background:#fff;
      border-radius:12px;
      padding:10px 12px;
      min-width:260px;
      font-size:14px;
      line-height:1.2
    }
    .grid{display:grid;gap:16px}
    @media(min-width:640px){.grid-2{grid-template-columns:repeat(2,minmax(0,1fr));}}
    @media(min-width:1024px){.grid-3{grid-template-columns:repeat(3,minmax(0,1fr));}}

    .stat{min-width:240px}
    .hbar{
      height:8px;
      background:var(--gray-100);
      border-radius:999px;
      overflow:hidden
    }
    .hbar > span{display:block;height:100%}

    .pill{
      padding:3px 8px;
      border-radius:999px;
      font-size:11px;
      font-weight:700;
      display:inline-block;
      line-height:1.2;
      border:0
    }
    .legend .pill{border:1px solid var(--border);}

    .muted{color:var(--muted)}
    .title{font-weight:800;letter-spacing:-.3px}
    .sub{font-size:12px;color:var(--muted);line-height:1.4}

    .kc-card{display:flex;gap:12px}
    .kc-ico{
      flex:0 0 auto;
      width:36px;height:36px;
      border-radius:12px;
      background:#f8fafc;
      display:grid;
      place-items:center;
      border:1px solid var(--border);
      font-size:16px;
      line-height:1
    }
    .small{font-size:12px;line-height:1.4}
    .kbd{font-variant-numeric:tabular-nums}
    .type-card{display:flex;align-items:flex-start;justify-content:space-between;gap:12px}
    .footer{font-size:12px;color:var(--muted);display:flex;gap:8px;align-items:flex-start}
    .section-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap}
    .section-left{min-width:0;flex:1}
    .section-right{text-align:right;font-size:12px;line-height:1.4}
    .badge-gray{
      background:#f3f4f6;
      color:#374151;
      border-radius:999px;
      padding:3px 8px;
      font-size:11px;
      font-weight:600;
      display:inline-block
    }

    .feedback-section h3{
      font-size:20px;
      margin:0 0 16px 0;
      display:flex;
      align-items:center;
      gap:8px;
      font-weight:700
    }
    .feedback-section h4{
      font-size:16px;
      margin:24px 0 8px 0;
      color:var(--indigo);
      border-left:3px solid var(--indigo);
      padding-left:8px;
      line-height:1.4;
      font-weight:700
    }
    .feedback-section .summary{
      font-size:14px;
      color:var(--muted);
      margin-top:-12px;
      margin-bottom:24px;
      line-height:1.5
    }
    .feedback-section hr{
      border:0;
      border-top:1px solid var(--border);
      margin:24px 0
    }
    .feedback-section blockquote{
      margin:12px 0;
      padding:12px;
      background-color:var(--gray-100);
      border-left:4px solid var(--border);
      border-radius:8px;
      font-size:13px;
      line-height:1.5
    }
    .feedback-section .analysis{
      margin-top:8px;
      font-size:13px;
      line-height:1.5
    }
    .feedback-section .analysis strong{color:var(--text)}

    @media print{
      .btn,.input{display:none !important;}
      .container{padding:0 12px 40px 12px;max-width:900px}
      body{background:#fff}
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- í—¤ë” -->
    <div class="between" style="gap:16px;">
      <div>
        <div class="title" style="font-size:24px">
          [3] ì…ì²´ë„í˜•ì˜ ì„±ì§ˆ Â· KC & í•™ìŠµìš”ì†Œ ì„±ì·¨ë„ ëŒ€ì‹œë³´ë“œ
        </div>
        <div id="subHeader" class="sub">
          í•™ìƒ: <strong>ì´ë¦„ ë¯¸ê¸°ì¬</strong> Â· ì§„ë‹¨ ë‹¨ì›: <strong>[3-1][3-2]</strong> Â· ê¸°ì¤€ì¼: <strong>2025-10-28</strong>
        </div>
      </div>
      <div class="row">
        <button id="printBtn" class="btn">ë‚´ë³´ë‚´ê¸°/ì¸ì‡„</button>
      </div>
    </div>

    <!-- ë·° ì „í™˜ & ê²€ìƒ‰ -->
    <div class="row" style="margin-top:16px;align-items:center">
      <div class="row">
        <button data-view="all" class="btn view-btn active">ì „ì²´</button>
        <button data-view="shape" class="btn view-btn">ë‹¤ë©´ì²´Â·íšŒì „ì²´</button>
        <button data-view="volume" class="btn view-btn">ê²‰ë„“ì´Â·ë¶€í”¼</button>
        <button data-view="feedback" class="btn view-btn">í”¼ë“œë°±</button>
      </div>
      <div style="flex:1"></div>
      <input id="search" class="input" placeholder="í•™ìŠµìš”ì†Œ / ì„¤ëª… ê²€ìƒ‰" />
    </div>

    <!-- ìš”ì•½ í†µê³„ -->
    <div class="grid grid-3" style="margin-top:16px">
      <div class="card p-16 stat">
        <div class="muted small">ì „ì²´ KC ì„±ì·¨ë„ (ê°€ì¤‘ í‰ê· )</div>
        <div class="row" style="align-items:center;gap:6px">
          <div id="overallKC" class="title" style="font-size:22px;margin-top:4px">â€”</div>
          <div class="pill" style="background:var(--blue-100);color:var(--blue);font-size:11px;font-weight:700">NEW</div>
        </div>
        <div class="hbar" style="margin-top:8px"><span id="overallKCBar" style="width:0"></span></div>
        <div id="overallKCRaw" class="small muted" style="margin-top:6px"></div>
      </div>

      <div class="card p-16 stat">
        <div class="muted small">ì¤‘ë‹¨ì›ë³„ í‰ê·  ì„±ì·¨ë„</div>
        <div class="row" style="align-items:center;gap:6px">
          <div id="avgGroup" class="title" style="font-size:22px;margin-top:4px">â€”</div>
          <div class="pill" style="background:var(--blue-100);color:var(--blue);font-size:11px;font-weight:700">NEW</div>
        </div>
        <div class="hbar" style="margin-top:8px"><span id="avgGroupBar" style="width:0"></span></div>
        <div class="small muted" style="margin-top:6px">ë‹¤ë©´ì²´Â·íšŒì „ì²´ / ê²‰ë„“ì´Â·ë¶€í”¼ ì˜ì—­ì˜ í‰ê· </div>
      </div>

      <div class="card p-16 stat">
        <div class="muted small">ì´ ë“ì  / ì´ ë°°ì </div>
        <div class="row" style="align-items:baseline;gap:6px">
          <div id="totalRate" class="title" style="font-size:22px;margin-top:4px">â€”</div>
          <div id="totalCount" class="muted" style="font-weight:600;font-size:14px;"></div>
        </div>
        <div class="hbar" style="margin-top:8px"><span id="totalRateBar" style="width:0"></span></div>
      </div>
    </div>

    <!-- ë²”ë¡€ -->
    <div class="legend row card p-16" style="margin-top:16px">
      <div class="muted small">ë²”ë¡€:</div>
      <span class="pill" style="background:var(--green-100);color:var(--green)">ìš°ìˆ˜ â‰¥ 85%</span>
      <span class="pill" style="background:var(--yellow-100);color:var(--yellow)">60â€“84%</span>
      <span class="pill" style="background:var(--red-100);color:var(--red)">1â€“59%</span>
      <span class="pill" style="background:#e5e7eb;color:#374151">ë¯¸í•™ìŠµ</span>
      <span class="pill" style="background:var(--blue-100);color:var(--blue)">KC ì„±ì·¨ë„(ì†Œê³„)</span>
    </div>

    <!-- ë™ì  ë§ˆìš´íŠ¸ ì˜ì—­ -->
    <div id="mount"></div>

    <!-- ì§‘ì¤‘ ë³´ì™„ ì˜ì—­ -->
    <section class="card p-20" style="margin-top:16px" id="focusBox">
      <div class="between">
        <div>
          <div class="title" style="font-size:18px">ğŸ“Œ ì§‘ì¤‘ ë³´ì™„ ì˜ì—­ (ìš°ì„ ìˆœìœ„ TOP 3)</div>
          <div class="sub">ì„±ì·¨ë„ê°€ ë‚®ì€ í•™ìŠµìš”ì†Œë¥¼ ê¸°ì¤€ìœ¼ë¡œ ìë™ ì œì‹œ</div>
        </div>
      </div>
      <ol id="focusList" class="small" style="margin-top:8px;padding-left:18px"></ol>
    </section>

    <div class="footer" style="margin-top:16px">
      <span>ìƒ‰ìƒ ê¸°ì¤€: ğŸŸ¢ 85% ì´ìƒ, ğŸŸ¡ 60â€“84%, ğŸŸ¥ 1â€“59%, íšŒìƒ‰=ë¯¸í•™ìŠµ. ìƒë‹¨ ë²„íŠ¼ìœ¼ë¡œ ì˜ì—­ë³„ë¡œ í•„í„°ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¸ì‡„ ë²„íŠ¼ìœ¼ë¡œ PDF ì €ì¥ ê°€ëŠ¥.</span>
    </div>
  </div>

  <script>
  (() => { 'use strict';

    // =========================
    // 1. ë°ì´í„° ì •ì˜
    // =========================

    // ê·¸ë£¹(ì¤‘ë‹¨ì›/ì†Œë‹¨ì›) ìš”ì•½: "ì†Œê³„"ë¥¼ KC ì„±ì·¨ë„ë¡œ ì‚¬ìš©
    // summaryScore: ì†Œê³„ %
    // summaryCorrect/summaryTotal: (íšë“ / ë°°ì )
    const groupMeta = {
      poly: {
        icon: "ğŸ“¦",
        title: "A. ë‹¤ë©´ì²´",
        subtitle: "ë‹¤ë©´ì²´ì˜ ì„±ì§ˆ Â· ì •ë‹¤ë©´ì²´ Â· ì˜¤ì¼ëŸ¬ ê´€ì ",
        summaryScore: 41.7,
        summaryCorrect: 30.0,
        summaryTotal: 72.0
      },
      solidRot: {
        icon: "ğŸ”„",
        title: "B. íšŒì „ì²´",
        subtitle: "í‰ë©´ë„í˜•ì„ íšŒì „í•´ ë§Œë“  ì…ì²´ì™€ ì „ê°œë„",
        summaryScore: 44.3,
        summaryCorrect: 31.0,
        summaryTotal: 70.0
      },
      pillar: {
        icon: "ğŸ›ï¸",
        title: "C-1. ê¸°ë‘¥ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼",
        subtitle: "ê°ê¸°ë‘¥ Â· ì›ê¸°ë‘¥",
        summaryScore: 44.8,
        summaryCorrect: 13.0,
        summaryTotal: 29.0
      },
      pyramid: {
        icon: "ğŸ”º",
        title: "C-2. ë¿”ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼",
        subtitle: "ê°ë¿” Â· ì›ë¿” Â· ì›ë¿”ëŒ€",
        summaryScore: 44.0,
        summaryCorrect: 33.0,
        summaryTotal: 75.0
      },
      sphere: {
        icon: "âšª",
        title: "C-3. êµ¬ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼",
        subtitle: "êµ¬ Â· ë‚´ì ‘ ë„í˜• ê´€ê³„",
        summaryScore: 21.5,
        summaryCorrect: 12.0,
        summaryTotal: 45.5
      }
    };

    // KC ì„¸ë¶€ (ê° í•™ìŠµìš”ì†Œ)
    // score: ì„±ì·¨ë„(%)
    // correct/total: ë“ì /ë°°ì  (ë¬¸ì œ ë§ì€ ê°œìˆ˜ / ì¶œì œ ê°œìˆ˜ì²˜ëŸ¼ í‘œì‹œ)
    // desc: í•™ìŠµ ìš”ì†Œ ì„¤ëª…(íŒë‹¨ ê¸°ì¤€)
    const kcItems = [
      // ë‹¤ë©´ì²´ ì˜ì—­
      {
        id:"poly-01", group:"poly",
        label:"ë‹¤ë©´ì²´",
        desc:"'ë‹¤ê°í˜•ì¸ ë©´ìœ¼ë¡œë§Œ ë‘˜ëŸ¬ì‹¸ì¸ ì…ì²´ë„í˜•(ë‹¤ë©´ì²´)'ê³¼ ê³¡ë©´ì„ í¬í•¨í•˜ëŠ” ì…ì²´ë„í˜•(ì›ê¸°ë‘¥Â·ì›ë¿”Â·êµ¬ ë“±)ì„ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:1.0, total:1.0
      },
      {
        id:"poly-02", group:"poly",
        label:"ë‹¤ë©´ì²´ì˜ ë©´ì˜ ê°œìˆ˜",
        desc:"nê°ê¸°ë‘¥, nê°ë¿”, nê°ë¿”ëŒ€ì˜ 'ë©´ì˜ ê°œìˆ˜'ë¥¼ ê°ê° n+2, n+1, n+2ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:50.0, correct:3.0, total:6.0
      },
      {
        id:"poly-03", group:"poly",
        label:"ë‹¤ë©´ì²´ì˜ ëª¨ì„œë¦¬ì˜ ê°œìˆ˜",
        desc:"nê°ê¸°ë‘¥, nê°ë¿”, nê°ë¿”ëŒ€ì˜ 'ëª¨ì„œë¦¬ ê°œìˆ˜'ë¥¼ 3n, 2n, 3nìœ¼ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:1.0, total:1.0
      },
      {
        id:"poly-04", group:"poly",
        label:"ë‹¤ë©´ì²´ì˜ ê¼­ì§“ì ì˜ ê°œìˆ˜",
        desc:"nê°ê¸°ë‘¥, nê°ë¿”, nê°ë¿”ëŒ€ì˜ 'ê¼­ì§“ì  ê°œìˆ˜'ë¥¼ 2n, n+1, 2nìœ¼ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },
      {
        id:"poly-05", group:"poly",
        label:"ë©´Â·ëª¨ì„œë¦¬Â·ê¼­ì§“ì  ê°œìˆ˜ì˜ í™œìš©",
        desc:"ë©´/ëª¨ì„œë¦¬/ê¼­ì§“ì ì˜ ê°œìˆ˜ ì¤‘ ì¼ë¶€ ì •ë³´ë¡œ, í•´ë‹¹ ë„í˜•ì´ ê°ê¸°ë‘¥ì¸ì§€ ê°ë¿”ì¸ì§€ ê°ë¿”ëŒ€ì¸ì§€ íŒë³„í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:37.5, correct:3.0, total:8.0
      },
      {
        id:"poly-06", group:"poly",
        label:"ë‹¤ë©´ì²´ì˜ ì˜†ë©´ì˜ ëª¨ì–‘",
        desc:"ê°ê¸°ë‘¥ì˜ ì˜†ë©´ì€ ì§ì‚¬ê°í˜•, ê°ë¿”ì€ ì‚¼ê°í˜•, ê°ë¿”ëŒ€ëŠ” ì‚¬ë‹¤ë¦¬ê¼´ì„ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },
      {
        id:"poly-07", group:"poly",
        label:"ë‹¤ë©´ì²´ì˜ ì´í•´",
        desc:"ê°ê¸°ë‘¥/ê°ë¿”/ê°ë¿”ëŒ€ì˜ ì •ì˜(ë°‘ë©´ì˜ ê´€ê³„, ì˜†ë©´ì˜ ëª¨ì–‘)ë¥¼ ë¬¸ì¥ìœ¼ë¡œ ì •í™•íˆ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:8.0
      },
      {
        id:"poly-08", group:"poly",
        label:"ì¡°ê±´ì„ ë§Œì¡±ì‹œí‚¤ëŠ” ë‹¤ë©´ì²´ ì°¾ê¸°",
        desc:"ì˜†ë©´ ëª¨ì–‘, ë°‘ë©´ ëª¨ì–‘, ë©´Â·ëª¨ì„œë¦¬Â·ê¼­ì§“ì ì˜ ê°œìˆ˜ ë“± ì¡°ê±´ì„ ì¢…í•©í•´ ì–´ë–¤ ë‹¤ë©´ì²´ì¸ì§€ ì´ë¦„ì„ ë§í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:10.0, total:10.0
      },
      {
        id:"poly-09", group:"poly",
        label:"ë‹¤ë©´ì²´ì˜ ê¼­ì§“ì Â·ëª¨ì„œë¦¬Â·ë©´ì˜ ê°œìˆ˜ ì‚¬ì´ì˜ ê´€ê³„ (ì˜¤ì¼ëŸ¬ ê³µì‹)",
        desc:"v-e+f=2 (ì˜¤ì¼ëŸ¬ ê³µì‹)ì„ ì´í•´í•˜ê³  í™œìš©í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:null, correct:null, total:null // ë¯¸í•™ìŠµ
      },
      {
        id:"poly-10", group:"poly",
        label:"ì •ë‹¤ë©´ì²´",
        desc:"ì •ë‹¤ë©´ì²´ì˜ ë‘ ì¡°ê±´(â‘ ëª¨ë“  ë©´ì´ í•©ë™ì¸ ì •ë‹¤ê°í˜• â‘¡ê° ê¼­ì§“ì ì— ëª¨ì¸ ë©´ì˜ ê°œìˆ˜ê°€ ê°™ë‹¤)ì„ ëª¨ë‘ ì„¤ëª…í•˜ê³ , ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ ë§Œì¡±í•˜ëŠ” ê²½ìš° ì™œ ì •ë‹¤ë©´ì²´ê°€ ì•„ë‹Œì§€ ë§í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:3.0
      },
      {
        id:"poly-11", group:"poly",
        label:"ì •ë‹¤ë©´ì²´ì˜ ì´í•´ (ê¼­ì§“ì ì— ëª¨ì¸ ë©´ì˜ ê°œìˆ˜ / ë©´ì˜ ëª¨ì–‘)",
        desc:"5ê°€ì§€ ì •ë‹¤ë©´ì²´ ê°ê°ì— ëŒ€í•´ ë©´ì˜ ëª¨ì–‘ê³¼ í•œ ê¼­ì§“ì ì— ëª¨ì´ëŠ” ë©´ì˜ ê°œìˆ˜ë¥¼ ì •í™•íˆ ì—°ê²°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:28.6, correct:2.0, total:7.0
      },
      {
        id:"poly-12", group:"poly",
        label:"ì •ë‹¤ë©´ì²´ì˜ ë©´Â·ëª¨ì„œë¦¬Â·ê¼­ì§“ì ì˜ ê°œìˆ˜",
        desc:"ì •ì‚¬ë©´ì²´, ì •ìœ¡ë©´ì²´, ì •íŒ”ë©´ì²´ ë“± 5ê°€ì§€ ì •ë‹¤ë©´ì²´ì˜ ë©´/ëª¨ì„œë¦¬/ê¼­ì§“ì ì˜ ê°œìˆ˜ë¥¼ ë§í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:9.0
      },
      {
        id:"poly-13", group:"poly",
        label:"ì •ë‹¤ë©´ì²´ì˜ ì „ê°œë„",
        desc:"ì „ê°œë„ë¥¼ ë³´ê³  ì–´ë–¤ ì •ë‹¤ë©´ì²´ë¥¼ ë§Œë“¤ ìˆ˜ ìˆëŠ”ì§€, ê²¹ì¹˜ê±°ë‚˜ ë¶€ì¡±í•œ ë©´ì´ ìˆëŠ”ì§€ êµ¬ë³„í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:1.0, total:1.0
      },
      {
        id:"poly-14", group:"poly",
        label:"ì •ë‹¤ë©´ì²´ ì „ê°œë„ì™€ êµ¬ì„± ìš”ì†Œ ì—°ê²°",
        desc:"ì „ê°œë„ì˜ ë©´ ê°œìˆ˜ë¡œ ì •ë‹¤ë©´ì²´ë¥¼ íŒŒì•…í•˜ê³ , ê·¸ ì •ë‹¤ë©´ì²´ì˜ ëª¨ì„œë¦¬ ìˆ˜ì™€ ê¼­ì§“ì  ìˆ˜ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:7.0, total:7.0
      },
      {
        id:"poly-15", group:"poly",
        label:"ì •ë‹¤ë©´ì²´ì˜ ê° ë©´ì˜ í•œê°€ìš´ë° ì ì„ ì—°ê²°í•œ ì…ì²´ë„í˜•",
        desc:"íŠ¹ì • ì •ë‹¤ë©´ì²´ì˜ ê° ë©´ì˜ ì¤‘ì‹¬ì„ ì—°ê²°í•´ ìƒˆë¡œ ìƒê¸°ëŠ” ì…ì²´ë„í˜•(ì˜ˆ: ì •ìœ¡ë©´ì²´ â†’ ì •íŒ”ë©´ì²´)ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:8.0, total:8.0
      },
      {
        id:"poly-16", group:"poly",
        label:"ì •ë‹¤ë©´ì²´ì˜ ë‹¨ë©´",
        desc:"ì •ìœ¡ë©´ì²´ë¥¼ í‰ë©´ìœ¼ë¡œ ì˜ëì„ ë•Œ ë‹¨ë©´ì´ ì‚¼ê°í˜•, ì‚¬ê°í˜•, ì˜¤ê°í˜•, ìœ¡ê°í˜• ë“± ë‹¤ì–‘í•œ ë‹¤ê°í˜•ì´ ë  ìˆ˜ ìˆìŒì„ ì´í•´í•˜ëŠ”ê°€?",
        score:0.0, correct:0.0, total:9.0
      },

      // íšŒì „ì²´ ì˜ì—­
      {
        id:"rot-01", group:"solidRot",
        label:"íšŒì „ì²´",
        desc:"í‰ë©´ë„í˜•ì„ í•œ ì§ì„ ì„ ì¶•ìœ¼ë¡œ 1íšŒì „í•˜ì—¬ ìƒê¸°ëŠ” ì…ì²´(íšŒì „ì²´)ì™€ ë‹¤ë©´ì²´ë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:1.0, total:1.0
      },
      {
        id:"rot-02", group:"solidRot",
        label:"í‰ë©´ë„í˜•ê³¼ íšŒì „ì²´",
        desc:"ì§ì‚¬ê°í˜•â†’ì›ê¸°ë‘¥, ì§ê°ì‚¼ê°í˜•â†’ì›ë¿”, ì‚¬ë‹¤ë¦¬ê¼´â†’ì›ë¿”ëŒ€, ë°˜ì›â†’êµ¬ì˜ ëŒ€ì‘ ê´€ê³„ë¥¼ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:33.3, correct:3.0, total:9.0
      },
      {
        id:"rot-03", group:"solidRot",
        label:"íšŒì „ì¶•",
        desc:"ì£¼ì–´ì§„ ì…ì²´ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì–´ë–¤ í‰ë©´ë„í˜•ì˜ ì–´ëŠ ë³€(ë˜ëŠ” ì–´ë–¤ ì„ ë¶„)ì„ íšŒì „ì¶•ìœ¼ë¡œ ì‚¼ì•„ì•¼ í•˜ëŠ”ì§€ ë§í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },
      {
        id:"rot-04", group:"solidRot",
        label:"íšŒì „ì²´ì˜ ë‹¨ë©´ì˜ ëª¨ì–‘ (1)",
        desc:"íšŒì „ì²´ë¥¼ íšŒì „ì¶•ì— ìˆ˜ì§ì¸ í‰ë©´ìœ¼ë¡œ ìë¥´ë©´ ì›, íšŒì „ì¶•ì„ í¬í•¨í•˜ëŠ” í‰ë©´ìœ¼ë¡œ ìë¥´ë©´ ì„ ëŒ€ì¹­ë„í˜•ì´ ë‚˜ì˜´ì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:3.0, total:3.0
      },
      {
        id:"rot-05", group:"solidRot",
        label:"íšŒì „ì²´ì˜ ë‹¨ë©´ì˜ ëª¨ì–‘ (2)",
        desc:"ì›ê¸°ë‘¥ì„ ìë¥´ëŠ” ë°©í–¥ì— ë”°ë¼ ë‹¨ë©´ì´ ì§ì‚¬ê°í˜•/ì›/íƒ€ì› ë“± ë‹¤ì–‘í•˜ê²Œ ë‚˜ì˜¬ ìˆ˜ ìˆìŒì„ ì´í•´í•˜ëŠ”ê°€?",
        score:37.5, correct:3.0, total:8.0
      },
      {
        id:"rot-06", group:"solidRot",
        label:"íšŒì „ì²´ì˜ ë‹¨ë©´ì˜ ë„“ì´ì™€ ë‘˜ë ˆì˜ ê¸¸ì´",
        desc:"ì˜ë¦° ë‹¨ë©´ì˜ ë„“ì´ì™€ ë‘˜ë ˆì˜ ê¸¸ì´ë¥¼, íšŒì „ì‹œí‚¤ê¸° ì „ì˜ í‰ë©´ë„í˜•ì—ì„œ ì–»ì€ ê¸¸ì´ ì •ë³´ë¥¼ ì´ìš©í•˜ì—¬ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:28.6, correct:2.0, total:7.0
      },
      {
        id:"rot-07", group:"solidRot",
        label:"íšŒì „ì²´ì˜ ì „ê°œë„",
        desc:"ì›ê¸°ë‘¥Â·ì›ë¿”Â·ì›ë¿”ëŒ€ì˜ ì „ê°œë„ë¥¼ (ì›, ì§ì‚¬ê°í˜•, ë¶€ì±„ê¼´ ë“±) ì˜¬ë°”ë¥´ê²Œ ê·¸ë¦´ ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:6.0
      },
      {
        id:"rot-08", group:"solidRot",
        label:"ì›ê¸°ë‘¥ì˜ ì „ê°œë„ì˜ ì„±ì§ˆ",
        desc:"ì›ê¸°ë‘¥ ì „ê°œë„ì—ì„œ ì˜†ë©´ ì§ì‚¬ê°í˜•ì˜ ê°€ë¡œ ê¸¸ì´ê°€ ë°‘ë©´ ì›ì˜ ë‘˜ë ˆ ê¸¸ì´ì™€ ê°™ìŒì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:1.0, total:1.0
      },
      {
        id:"rot-09", group:"solidRot",
        label:"ì›ë¿”ì˜ ì „ê°œë„ì˜ ì„±ì§ˆ",
        desc:"ì›ë¿” ì „ê°œë„ì—ì„œ ì˜†ë©´ ë¶€ì±„ê¼´ì˜ í˜¸ì˜ ê¸¸ì´ê°€ ë°‘ë©´ ì›ì˜ ë‘˜ë ˆ ê¸¸ì´ì™€ ê°™ìŒì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:42.9, correct:3.0, total:7.0
      },
      {
        id:"rot-10", group:"solidRot",
        label:"ì›ë¿”ëŒ€ì˜ ì „ê°œë„ì˜ ì„±ì§ˆ",
        desc:"ì›ë¿”ëŒ€ ì „ê°œë„ì—ì„œ ì˜†ë©´ì„ ì´ë£¨ëŠ” ë‘ í˜¸ì˜ ê¸¸ì´ê°€ ê°ê° ë‘ ë°‘ë©´ ì›ì˜ ë‘˜ë ˆ ê¸¸ì´ì™€ ê°™ìŒì„ ì„¤ëª…í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:10.0
      },
      {
        id:"rot-11", group:"solidRot",
        label:"íšŒì „ì²´ì˜ ì´í•´",
        desc:"íšŒì „ì²´ì˜ ê¸°ë³¸ ì„±ì§ˆ(ë‹¨ë©´ ëª¨ì–‘, ì„ ëŒ€ì¹­ ë“±)ì— ëŒ€í•œ ì„¤ëª…ì˜ ì°¸/ê±°ì§“ì„ íŒë³„í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },

      // ê¸°ë‘¥ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼
      {
        id:"col-01", group:"pillar",
        label:"ê°ê¸°ë‘¥ì˜ ê²‰ë„“ì´",
        desc:"ê°ê¸°ë‘¥ì˜ ì „ê°œë„ë¥¼ ì´ìš©í•˜ì—¬ ë°‘ë„“ì´Ã—2ì™€ ì˜†ë„“ì´ì˜ í•©ìœ¼ë¡œ ê²‰ë„“ì´ë¥¼ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:5.0
      },
      {
        id:"col-02", group:"pillar",
        label:"ì›ê¸°ë‘¥ì˜ ê²‰ë„“ì´",
        desc:"ì›ê¸°ë‘¥ì˜ ê²‰ë„“ì´ ê³µì‹ 2Ï€rÂ² + 2Ï€rh ë¥¼ ì‚¬ìš©í•´ ê°’ì„ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:5.0
      },
      {
        id:"col-03", group:"pillar",
        label:"ê°ê¸°ë‘¥ì˜ ë¶€í”¼",
        desc:"ê°ê¸°ë‘¥ì˜ ë¶€í”¼ê°€ (ë°‘ë„“ì´)Ã—(ë†’ì´)ì„ì„ ì•Œê³  ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },
      {
        id:"col-04", group:"pillar",
        label:"ì›ê¸°ë‘¥ì˜ ë¶€í”¼",
        desc:"ì›ê¸°ë‘¥ì˜ ë¶€í”¼ ê³µì‹ Ï€rÂ²h ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°’ì„ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:5.0, total:5.0
      },
      {
        id:"col-05", group:"pillar",
        label:"ë°‘ë©´ì´ ë¶€ì±„ê¼´ì¸ ê¸°ë‘¥ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼",
        desc:"ë°‘ë©´ì´ ë¶€ì±„ê¼´ì¼ ë•Œë„ ê²‰ë„“ì´/ë¶€í”¼ë¥¼ ë¶„í•´í•˜ì—¬ ë™ì¼í•œ ì›ë¦¬ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:4.0, total:4.0
      },
      {
        id:"col-06", group:"pillar",
        label:"êµ¬ë©ì´ ëš«ë¦° ê¸°ë‘¥ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼",
        desc:"ê²‰ë„“ì´ = ë‘ ë°‘ë„“ì´ + ë°”ê¹¥ ì˜†ë„“ì´ + ì•ˆìª½ ì˜†ë„“ì´, ë¶€í”¼ = (í° ê¸°ë‘¥ ë¶€í”¼) - (ì‘ì€ ê¸°ë‘¥ ë¶€í”¼) ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:3.0, total:3.0
      },
      {
        id:"col-07", group:"pillar",
        label:"ì¼ë¶€ë¶„ì„ ì˜ë¼ ë‚¸ ê¸°ë‘¥ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼",
        desc:"ì˜ë ¤ ë‚˜ê°„ ë¶€ë¶„ì„ ì „ì²´ì—ì„œ ë¹¼ê±°ë‚˜, ê° ë©´ì„ ë‚˜ëˆ„ì–´ ë”°ë¡œ ê³„ì‚°í•´ í•©ì¹˜ëŠ” ë°©ì‹ìœ¼ë¡œ ê²‰ë„“ì´ì™€ ë¶€í”¼ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:5.0
      },
      {
        id:"col-08", group:"pillar",
        label:"íšŒì „ì²´ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼; ì›ê¸°ë‘¥",
        desc:"ì§ì‚¬ê°í˜•ì„ íšŒì „ì‹œì¼œ ë§Œë“  ì›ê¸°ë‘¥ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },

      // ë¿”ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼
      {
        id:"py-01", group:"pyramid",
        label:"ê°ë¿”ì˜ ê²‰ë„“ì´",
        desc:"ê°ë¿”ì˜ ê²‰ë„“ì´ë¥¼ (ë°‘ë„“ì´)+(ëª¨ë“  ì˜†ë©´ì˜ ë„“ì´ì˜ í•©)ìœ¼ë¡œ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:2.0
      },
      {
        id:"py-02", group:"pyramid",
        label:"ì›ë¿”ì˜ ê²‰ë„“ì´",
        desc:"ì›ë¿”ì˜ ê²‰ë„“ì´ ê³µì‹ Ï€rÂ² + Ï€rl ì„ ì´ìš©í•´ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:28.6, correct:2.0, total:7.0
      },
      {
        id:"py-03", group:"pyramid",
        label:"ì›ë¿”ì˜ ê²‰ë„“ì´; ì „ê°œë„",
        desc:"ì›ë¿”ì˜ ì „ê°œë„(ë°‘ë©´ ì›ê³¼ ì˜†ë©´ ë¶€ì±„ê¼´)ì˜ ê´€ê³„ë¥¼ ì´ìš©í•˜ì—¬ ê²‰ë„“ì´ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:4.0, total:4.0
      },
      {
        id:"py-04", group:"pyramid",
        label:"ë¿”ëŒ€ì˜ ê²‰ë„“ì´",
        desc:"ë¿”ëŒ€ì˜ ê²‰ë„“ì´ë¥¼ (ë‘ ë°‘ë„“ì´ì˜ í•©)+(ì˜†ë„“ì´)ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:37.5, correct:3.0, total:8.0
      },
      {
        id:"py-05", group:"pyramid",
        label:"ê°ë¿”ì˜ ë¶€í”¼",
        desc:"ê°ë¿”ì˜ ë¶€í”¼ (1/3)Ã—(ë°‘ë„“ì´)Ã—(ë†’ì´)ë¥¼ ì´ìš©í•´ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:55.6, correct:5.0, total:9.0
      },
      {
        id:"py-06", group:"pyramid",
        label:"ì§ìœ¡ë©´ì²´ ë‚´ë¶€ì˜ ê°ë¿” ë¶€í”¼",
        desc:"ì§ìœ¡ë©´ì²´ ë‚´ë¶€ì— í¬í•¨ëœ ê°ë¿”ì˜ ë°‘ë„“ì´ì™€ ë†’ì´ê°€ ì£¼ì–´ì¡Œì„ ë•Œ ê·¸ ë¶€í”¼ ê´€ê³„ë¥¼ ì´í•´í•˜ê³  ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:3.0, total:3.0
      },
      {
        id:"py-07", group:"pyramid",
        label:"ê°ê¸°ë‘¥ì—ì„œ ì˜ë¼ ë‚¸ ê°ë¿”ì˜ ë¶€í”¼",
        desc:"ê°ê¸°ë‘¥(ì§ìœ¡ë©´ì²´ ë“±) ì¼ë¶€ë¥¼ ì˜ë¼ë‚´ ìƒê¸°ëŠ” ê°ë¿”ì˜ ë¶€í”¼ë¥¼ ì „ì²´-ì¼ë¶€ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:5.0
      },
      {
        id:"py-08", group:"pyramid",
        label:"ê·¸ë¦‡ì— ë‹´ê¸´ ë¬¼ì˜ ë¶€í”¼",
        desc:"ê¸°ìš¸ì–´ì§„ ê·¸ë¦‡ ì† ë¬¼ì˜ ëª¨ì–‘ì´ ì‚¼ê°ë¿” í˜•íƒœë¡œ ë³¼ ìˆ˜ ìˆìŒì„ ì´í•´í•˜ê³  ê·¸ ë¶€í”¼ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:33.3, correct:2.0, total:5.0
      },
      {
        id:"py-09", group:"pyramid",
        label:"ì›ë¿”ì˜ ë¶€í”¼",
        desc:"ì›ë¿”ì˜ ë¶€í”¼ (1/3)Ï€rÂ²h ë¥¼ ì´ìš©í•˜ì—¬ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },
      {
        id:"py-10", group:"pyramid",
        label:"ë¿”ëŒ€ì˜ ë¶€í”¼",
        desc:"ë¿”ëŒ€ì˜ ë¶€í”¼ë¥¼ (í° ë¿”ì˜ ë¶€í”¼)-(ì‘ì€ ë¿”ì˜ ë¶€í”¼)ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:7.0
      },
      {
        id:"py-11", group:"pyramid",
        label:"íšŒì „ì²´ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼ (1) ì›ë¿”",
        desc:"ì§ê°ì‚¼ê°í˜•ì„ íšŒì „ì‹œì¼œ ìƒê¸°ëŠ” ì›ë¿”ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:5.0
      },
      {
        id:"py-12", group:"pyramid",
        label:"íšŒì „ì²´ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼ (2) ì›ë¿”ëŒ€",
        desc:"ì‚¬ë‹¤ë¦¬ê¼´ì„ íšŒì „ì‹œì¼œ ìƒê¸°ëŠ” ì›ë¿”ëŒ€ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },

      // êµ¬ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼
      {
        id:"sp-01", group:"sphere",
        label:"êµ¬ì˜ ê²‰ë„“ì´",
        desc:"ë°˜ì§€ë¦„ rì¸ êµ¬ì˜ ê²‰ë„“ì´ 4Ï€rÂ², ë°˜êµ¬ì˜ ê²‰ë„“ì´ 3Ï€rÂ²ì„ ì´ìš©í•´ ê°’ì„ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:13.0, correct:2.0, total:14.5
      },
      {
        id:"sp-02", group:"sphere",
        label:"êµ¬ì˜ ë¶€í”¼",
        desc:"êµ¬ì˜ ë¶€í”¼ (4/3)Ï€rÂ³ ì„ ì´ìš©í•´ ê³„ì‚°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:7.5
      },
      {
        id:"sp-03", group:"sphere",
        label:"íšŒì „ì²´ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼; êµ¬",
        desc:"ë°˜ì›ì„ íšŒì „ì‹œì¼œ ë§Œë“  êµ¬ì˜ ê²‰ë„“ì´ì™€ ë¶€í”¼ë¥¼ êµ¬í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:100.0, correct:2.0, total:2.0
      },
      {
        id:"sp-04", group:"sphere",
        label:"ì›ê¸°ë‘¥ì— ê¼­ ë§ê²Œ ë“¤ì–´ê°€ëŠ” êµ¬Â·ì›ë¿”",
        desc:"ì›ê¸°ë‘¥ ì•ˆì— ê¼­ ë§ëŠ” êµ¬/ì›ë¿”/ì›ê¸°ë‘¥ì˜ ë¶€í”¼ ë¹„ê°€ 1:2:3ì„ì„ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:3.0
      },
      {
        id:"sp-05", group:"sphere",
        label:"ì…ì²´ë„í˜•ì— ê¼­ ë§ê²Œ ë“¤ì–´ê°€ëŠ” ì…ì²´ë„í˜•",
        desc:"í•œ ì…ì²´ë„í˜• ì•ˆì— ê¼­ ë§ê²Œ ë“¤ì–´ê°€ëŠ” ë‹¤ë¥¸ ì…ì²´ë„í˜•(ì˜ˆ: ë°˜êµ¬ ì•ˆì˜ ì›ë¿”)ì˜ ë¶€í”¼ ê´€ê³„ë¥¼ ì´ìš©í•´ ë¬¸ì œë¥¼ í•´ê²°í•  ìˆ˜ ìˆëŠ”ê°€?",
        score:0.0, correct:0.0, total:5.0
      }
    ];

    // ë·° ê·¸ë£¹í•‘ (ì–´ëŠ ì„¹ì…˜ì—ì„œ ì–´ë–¤ groupì„ ë³´ì—¬ì¤„ì§€)
    const viewToGroups = {
      all:    ["poly","solidRot","pillar","pyramid","sphere"],
      shape:  ["poly","solidRot"],
      volume: ["pillar","pyramid","sphere"],
      feedback: [] // ë Œë” ì‹œ ë³„ë„ ì²˜ë¦¬
    };

    // =========================
    // 2. í—¬í¼ í•¨ìˆ˜
    // =========================
    const thresholds = { excellent:85, ok:60 };
    const clamp = (n) => Math.max(0, Math.min(100, Number(n||0)));

    function statusColor(v){
      if(v==null) return "background:#e5e7eb;color:#374151";
      if(v>=thresholds.excellent) return "background:var(--green-100);color:var(--green)";
      if(v>=thresholds.ok) return "background:var(--yellow-100);color:var(--yellow)";
      return "background:var(--red-100);color:var(--red)";
    }
    function barColor(v){
      if(v==null) return "#e5e7eb";
      if(v>=thresholds.excellent) return "var(--green)";
      if(v>=thresholds.ok) return "var(--yellow)";
      return "var(--red)";
    }
    function scoreLabel(v){
      if(v==null) return "ë¯¸í•™ìŠµ";
      const n = +v;
      if(n === 100) return "100%";
      return n.toFixed(1)+"%";
    }
    function average(nums){
      const vals = nums.filter(v => v!=null && !Number.isNaN(Number(v)));
      if(!vals.length) return null;
      return vals.reduce((a,b)=>a+Number(b),0)/vals.length;
    }
    function weightedPct(correct,total){
      if(!total || total===0) return null;
      return (correct/total)*100;
    }

    // ì§‘ì¤‘ ë³´ì™„ ê°€ì´ë“œ ë©”ì‹œì§€ (ì¼ë¶€ ì£¼ìš” ì·¨ì•½ ìš”ì†Œì— ëŒ€í•´ ì»¤ìŠ¤í…€)
    const tips = {
      "ë‹¤ë©´ì²´ì˜ ì´í•´":
        "ê°ê¸°ë‘¥/ê°ë¿”/ê°ë¿”ëŒ€ì˜ ì •ì˜(ë°‘ë©´ì˜ ìˆ˜ì™€ ëª¨ì–‘, ì˜†ë©´ì´ ì–´ë–¤ ë„í˜•ì¸ì§€)ë¥¼ ë§ë¡œ ì„¤ëª…í•˜ëŠ” ì—°ìŠµì´ í•„ìš”í•©ë‹ˆë‹¤. 'ê·¸ë¦¼ ì—†ì´ ë§ë¡œ ì„¤ëª…' í›ˆë ¨ ì¶”ì²œ.",
      "ì •ë‹¤ë©´ì²´":
        "ì •ë‹¤ë©´ì²´ì˜ 2ê°€ì§€ ì¡°ê±´(â‘ ëª¨ë“  ë©´ì´ í•©ë™ì¸ ì •ë‹¤ê°í˜• â‘¡í•œ ê¼­ì§“ì ì— ëª¨ì´ëŠ” ë©´ì˜ ê°œìˆ˜ê°€ ê°™ë‹¤)ì„ í‘œë¡œ ì •ë¦¬í•´ ë°˜ë³µí•´ì„œ í™•ì¸í•˜ì„¸ìš”.",
      "ì •ë‹¤ë©´ì²´ì˜ ë©´Â·ëª¨ì„œë¦¬Â·ê¼­ì§“ì ì˜ ê°œìˆ˜":
        "ì •ë‹¤ë©´ì²´ 5ì¢…(ì •ì‚¬ë©´ì²´, ì •ìœ¡ë©´ì²´, ì •íŒ”ë©´ì²´, ì •ì´ì‹­ë©´ì²´, ì •ì‹­ì´ë©´ì²´)ì˜ ë©´/ëª¨ì„œë¦¬/ê¼­ì§“ì ì„ í‘œì²˜ëŸ¼ ì™¸ìš°ê³ , ì˜¤ì¼ëŸ¬ ê³µì‹ vâˆ’e+f=2 ë¡œ ì ê²€í•˜ëŠ” ì—°ìŠµì´ íš¨ê³¼ì ì…ë‹ˆë‹¤.",
      "êµ¬ì˜ ê²‰ë„“ì´":
        "4Ï€rÂ², ë°˜êµ¬ 3Ï€rÂ² ê³µì‹ ì•”ê¸° í›„ ì‹¤ì œ ìˆ«ìë¥¼ ë„£ì–´ ê³„ì‚°í•˜ëŠ” ë‹¨ê³„ê¹Œì§€ ë°˜ë³µí•˜ì„¸ìš”. ê³„ì‚° ì‹¤ìˆ˜ ì—¬ë¶€ê¹Œì§€ ì²´í¬í•˜ì„¸ìš”."
    };

    // =========================
    // 3. ë Œë”ë§ í•¨ìˆ˜
    // =========================
    const mount = document.getElementById('mount');
    const searchEl = document.getElementById('search');
    const focusBox = document.getElementById('focusBox');
    let currentView = 'all';

    function renderKCItem(item){
      // ê°œë³„ KC ì¹´ë“œ
      // NEW í‘œì‹œ: í˜„ì¬ëŠ” ë¹„êµ ë°ì´í„°ê°€ ì—†ìœ¼ë¯€ë¡œ ëª¨ë‘ NEWë¡œ ë³¸ë‹¤
      const isNewHTML = `<span class="pill" style="background:var(--blue-100);color:var(--blue);">NEW</span>`;

      const correctInfo = (item.correct!=null && item.total!=null)
        ? `(${item.correct}/${item.total})`
        : `(ë¯¸í•™ìŠµ)`;

      const el = document.createElement('div');
      el.className = 'card p-16';
      el.style.borderColor = '#e5e7eb';

      // ê·¸ë£¹ë³„ ì•„ì´ì½˜
      let icon="ğŸ“¦";
      if(item.group==="solidRot") icon="ğŸ”„";
      else if(item.group==="pillar") icon="ğŸ›ï¸";
      else if(item.group==="pyramid") icon="ğŸ”º";
      else if(item.group==="sphere") icon="âšª";

      el.innerHTML = `
        <div class="kc-card">
          <div class="kc-ico">${icon}</div>
          <div style="flex:1;min-width:0">
            <div class="row" style="align-items:center;gap:6px;flex-wrap:wrap">
              <span class="small" style="font-weight:700;line-height:1.4">${item.label}</span>
              <span class="pill" style="${statusColor(item.score)}">${scoreLabel(item.score)}</span>
              <span class="small muted" style="font-weight:600;line-height:1.4">${correctInfo}</span>
              ${isNewHTML}
            </div>

            <div class="small muted" style="margin-top:4px;line-height:1.5">
              ${item.desc}
            </div>

            <div class="hbar" style="margin-top:8px">
              <span style="width:${clamp(item.score||0)}%; background:${barColor(item.score)}"></span>
            </div>
          </div>
        </div>`;
      return el;
    }

    // ì„¹ì…˜(ì¤‘ë‹¨ì›/ì†Œë‹¨ì›) ì¹´ë“œ
    function renderGroupSection(groupId, q){
      const meta = groupMeta[groupId];
      if(!meta) return null;

      // ê²€ìƒ‰ í•„í„°
      const items = kcItems.filter(x => x.group===groupId).filter(x=>{
        if(!q) return true;
        const hay = (x.label+" "+x.desc).toLowerCase();
        return hay.includes(q);
      });

      if(!items.length) return null;

      const sec = document.createElement('section');
      sec.className = 'card p-20';
      sec.style.marginTop = '16px';

      // ê·¸ë£¹ í—¤ë” ìš°ì¸¡: KC ì„±ì·¨ë„(ì†Œê³„) / ë“ì 
      // summaryScore = ì†Œê³„ %
      // summaryCorrect / summaryTotal = (íšë“/ë°°ì )
      const summaryInfo = `
        <div class="row" style="justify-content:flex-end;gap:6px;flex-wrap:wrap">
          <span class="pill" style="${statusColor(meta.summaryScore)}">${scoreLabel(meta.summaryScore)}</span>
          <span class="pill" style="background:#f3f4f6;color:#374151">${meta.summaryCorrect}/${meta.summaryTotal}</span>
          <span class="pill" style="background:var(--blue-100);color:var(--blue);">KC ì„±ì·¨ë„</span>
        </div>
      `;

      sec.innerHTML = `
        <div class="section-head">
          <div class="section-left">
            <div class="title" style="font-size:18px;line-height:1.3">${meta.icon} ${meta.title}</div>
            <div class="sub">${meta.subtitle}</div>
          </div>
          <div class="section-right small">
            ${summaryInfo}
          </div>
        </div>
      `;

      const grid = document.createElement('div');
      grid.className = 'grid grid-2 grid-3';
      grid.style.marginTop = '12px';
      items.forEach(it => grid.appendChild(renderKCItem(it)));

      sec.appendChild(grid);
      return sec;
    }

    // í”¼ë“œë°± ì„¹ì…˜ (í•˜ë‹¨ ë¶„ì„ ì¹´ë“œ)
    function getFeedbackHTML(){
      return `
        <h3>ğŸ“Š ìƒì„¸ ë¶„ì„ ë° ë§ì¶¤ í”¼ë“œë°±</h3>

        <div style="font-size:14px;line-height:1.5;">
          <p style="padding:12px;background-color:var(--gray-100);border-radius:12px;margin-top:0;">
            <strong>ì´í‰:</strong>
            ì „ë°˜ì ìœ¼ë¡œ 'ê³µì‹ ì ìš©í˜• ê³„ì‚° ë¬¸ì œ'(ì˜ˆ: ì›ê¸°ë‘¥ì˜ ë¶€í”¼, ì›ë¿”ì˜ ë¶€í”¼)ëŠ” ë§¤ìš° ì•ˆì •ì ìœ¼ë¡œ í•´ê²°í•˜ê³  ìˆìŠµë‹ˆë‹¤ (í•´ë‹¹ ì˜ì—­ì€ 100% ì„±ì·¨ë„ê°€ ë‹¤ìˆ˜).
            ë°˜ë©´, <strong>ì •ì˜Â·êµ¬ì¡°ë¥¼ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•˜ëŠ” ë¬¸ì œ</strong>ì™€
            <strong>ì…ì²´ì˜ ì „ê°œë„ / ë‹¨ë©´ í•´ì„ ë¬¸ì œ</strong>ì—ì„œ í¬ê²Œ ì ìˆ˜ê°€ ë–¨ì–´ì§‘ë‹ˆë‹¤.
            ì´ ë‘ ì˜ì—­ì€ ì„œìˆ í˜•/ê³ ë‚œë„ ì‚¬ê³ ë ¥ ë¬¸ì œì—ì„œ ìì£¼ ë°˜ë³µë˜ë¯€ë¡œ ìš°ì„  ë³´ì™„ì´ í•„ìš”í•©ë‹ˆë‹¤.
          </p>
        </div>

        <hr>

        <h4>1ï¸âƒ£ ì •ë‹¤ë©´ì²´Â·ë‹¤ë©´ì²´ ê°œë… ì„¤ëª… íŒŒíŠ¸ (ê±°ì˜ ë¯¸ì™„ì„± ìƒíƒœ)</h4>
        <p class="summary">
          'ë‹¤ë©´ì²´ì˜ ì´í•´', 'ì •ë‹¤ë©´ì²´', 'ì •ë‹¤ë©´ì²´ì˜ ë©´Â·ëª¨ì„œë¦¬Â·ê¼­ì§“ì ì˜ ê°œìˆ˜', 'ì •ë‹¤ë©´ì²´ì˜ ë‹¨ë©´' ë“±ì€ ëª¨ë‘ 0% ë˜ëŠ” ë§¤ìš° ë‚®ì€ ì ìˆ˜ì…ë‹ˆë‹¤.
          ì´ëŠ” ê³µì‹ì„ ì™¸ìš°ëŠ” ë‹¨ê³„ ì´ì „ì¸ <strong>ìš©ì–´ ì´í•´ / ê°œë… ì •ì˜ ë§í•˜ê¸°</strong> ë‹¨ê³„ì—ì„œ ë§‰íŒ ìƒíƒœë¼ëŠ” ëœ»ì…ë‹ˆë‹¤.
        </p>
        <blockquote>
          <p><strong>ì˜ˆ:</strong> â€œì •ë‹¤ë©´ì²´ë€?â€ì— ëŒ€í•´
          ë‹¨ìˆœíˆ â€˜ì˜ˆìœ ë„í˜•â€™ì´ ì•„ë‹ˆë¼
          <strong>â‘  ëª¨ë“  ë©´ì´ í•©ë™ì¸ ì •ë‹¤ê°í˜•, â‘¡ í•œ ê¼­ì§“ì ì— ëª¨ì¸ ë©´ì˜ ê°œìˆ˜(ë°°ì—´)ê°€ ëª¨ë‘ ê°™ë‹¤</strong>
          ë¼ëŠ” ë‘ ê°€ì§€ ì¡°ê±´ì„ ë™ì‹œì— ë§í•  ìˆ˜ ìˆì–´ì•¼ ì •ë‹µì…ë‹ˆë‹¤.</p>
          <p>ë˜í•œ ì •ì‚¬ë©´ì²´Â·ì •ìœ¡ë©´ì²´Â·ì •íŒ”ë©´ì²´ ë“± 5ê°€ì§€ ì •ë‹¤ë©´ì²´ì˜
          ë©´/ëª¨ì„œë¦¬/ê¼­ì§“ì  ê°œìˆ˜ë¥¼ í‘œë¡œ ë¬¶ì–´ ê¸°ì–µí•˜ëŠ” í›ˆë ¨ë„ ìš”êµ¬ë©ë‹ˆë‹¤.</p>
        </blockquote>
        <p class="analysis">
          <strong>í•™ìŠµ ì „ëµ:</strong>
          (1) ì •ë‹¤ë©´ì²´ 5ì¢…ì— ëŒ€í•´ â€œë©´ ìˆ˜ / ëª¨ì„œë¦¬ ìˆ˜ / ê¼­ì§“ì  ìˆ˜â€ë¥¼ í•œëˆˆì— ë³´ëŠ” í‘œë¥¼ ì‘ì„±í•˜ì„¸ìš”.<br>
          (2) ê° ë„í˜•ì˜ ì „ê°œë„ë¥¼ ì‹¤ì œë¡œ ìŠ¤ì¼€ì¹˜í•˜ë©°,
          â€œì´ ì „ê°œë„ê°€ ë‹«íˆë©´ ì–´ë–¤ ì…ì²´ê°€ ë˜ì§€?â€ë¥¼ ë§ë¡œ ì„¤ëª…í•´ë³´ì„¸ìš”.<br>
          (3) ì˜¤ì¼ëŸ¬ ê³µì‹ vâˆ’e+f=2ë¥¼ ì´ìš©í•´ í‘œì˜ ìˆ˜ì¹˜ë¥¼ ìŠ¤ìŠ¤ë¡œ ê²€ì¦í•´ë³´ë©´ í›¨ì”¬ ë¹ ë¥´ê²Œ ì•”ê¸°ë©ë‹ˆë‹¤.
        </p>

        <hr>

        <h4>2ï¸âƒ£ íšŒì „ì²´ ë‹¨ë©´Â·ì „ê°œë„ íŒŒíŠ¸ (ì‹œê°í™” ìš”êµ¬)</h4>
        <p class="summary">
          'íšŒì „ì²´ì˜ ì „ê°œë„'(0%), 'ì›ë¿”ëŒ€ì˜ ì „ê°œë„ì˜ ì„±ì§ˆ'(0%), 'íšŒì „ì²´ì˜ ë‹¨ë©´ì˜ ë„“ì´ì™€ ë‘˜ë ˆ'(28.6%) ë“±ì€,
          ì‹¤ì œë¡œ ë¨¸ë¦¿ì†ì—ì„œ 3Dë¥¼ 2Dë¡œ 'í¼ì¹˜ê±°ë‚˜ ì˜ë¼ë³´ëŠ”' ìƒìƒë ¥ì´ ìš”êµ¬ë˜ëŠ” íŒŒíŠ¸ì…ë‹ˆë‹¤.
        </p>
        <blockquote>
          <p><strong>ì˜ˆ:</strong> â€œì›ë¿”ì„ í‰ë©´ìœ¼ë¡œ ì˜ëì„ ë•Œ ë‹¨ë©´ì€ ì–´ë–¤ ë„í˜•ì¸ê°€?â€<br>
          â€œì›ë¿”ëŒ€ë¥¼ ì „ê°œë„ í˜•íƒœë¡œ í¼ì¹˜ë©´ ë¶€ì±„ê¼´ 2ê°œê°€ ì–´ë–»ê²Œ ì—°ê²°ë¼ ìˆëŠ”ê°€?â€</p>
        </blockquote>
        <p class="analysis">
          <strong>í•™ìŠµ ì „ëµ:</strong>
          ì‹¤ì œë¡œ íœ´ì§€ì‹¬(ì›ê¸°ë‘¥)ì´ë‚˜ ì¢…ì´ì»µ(ì›ë¿”ëŒ€)ì„ ì˜ë¼ ë³´ê±°ë‚˜ ë„ë©´ì²˜ëŸ¼ í´ì„œ ê·¸ë¦¬ëŠ” ì—°ìŠµì„ ê¶Œì¥í•©ë‹ˆë‹¤.
          ëˆˆìœ¼ë¡œ ë³¸ ê²½í—˜ì´ ìƒê¸°ë©´ ì•”ê¸° í˜•íƒœê°€ ì•„ë‹ˆë¼ 'ì§ê´€'ìœ¼ë¡œ ë¬¸ì œë¥¼ í’€ ìˆ˜ ìˆê²Œ ë©ë‹ˆë‹¤.
        </p>

        <hr>

        <h4>3ï¸âƒ£ êµ¬ ê´€ë ¨ ê³µì‹ (ê²‰ë„“ì´Â·ë¶€í”¼)</h4>
        <p class="summary">
          'êµ¬ì˜ ê²‰ë„“ì´'(13.0%), 'êµ¬ì˜ ë¶€í”¼'(0%) ë“±ì€ ê³µì‹(4Ï€rÂ², (4/3)Ï€rÂ³) ìì²´ë¥¼ ì•„ì§ ì•ˆì •ì ìœ¼ë¡œ ì ìš©í•˜ì§€ ëª»í•œ ìƒíƒœë¡œ ë³´ì…ë‹ˆë‹¤.
        </p>
        <blockquote>
          <p><strong>ì˜ˆ:</strong> â€œë°˜ì§€ë¦„ì´ rì¸ êµ¬ì˜ ê²‰ë„“ì´ëŠ”?â€ â†’ 4Ï€rÂ²<br>
          â€œë°˜êµ¬(ë°˜ìª½ì§œë¦¬ êµ¬)ì˜ ê²‰ë„“ì´ëŠ”?â€ â†’ ë°‘ë©´ ì›ì˜ ë„“ì´ Ï€rÂ²ê¹Œì§€ í¬í•¨í•˜ë¯€ë¡œ 3Ï€rÂ²</p>
        </blockquote>
        <p class="analysis">
          <strong>í•™ìŠµ ì „ëµ:</strong>
          (1) ê³µì‹ì„ ì™¸ìš°ëŠ” ê²ƒì—ì„œ ëë‚´ì§€ ë§ê³  ì‹¤ì œ ìˆ«ìë¥¼ ë„£ì–´ ì§ì ‘ ê³„ì‚°í•´ë³´ì„¸ìš”.<br>
          (2) êµ¬, ë°˜êµ¬, ì›ê¸°ë‘¥ì— 'ê¼­ ë§ëŠ”' ì…ì²´ë“¤ì˜ ë¶€í”¼ ë¹„ 1:2:3 ê´€ê³„ë¥¼ ìŠ¤ì¼€ì¹˜ì™€ í•¨ê»˜ ì ì–´ë³´ë©´
          ê³µê°„ê°ì´ ë¹ ë¥´ê²Œ ì˜¬ë¼ê°‘ë‹ˆë‹¤.
        </p>
      `;
    }

    function renderView(){
      const q = (searchEl.value||'').trim().toLowerCase();
      mount.innerHTML = '';

      // focus ë°•ìŠ¤ ìˆ¨ê¹€ ì—¬ë¶€
      focusBox.style.display = currentView === 'feedback' ? 'none' : 'block';

      // 1) ê·¸ë£¹ ì„¹ì…˜ë“¤
      const groupsToShow = viewToGroups[currentView] || [];
      groupsToShow.forEach(gid=>{
        const sec = renderGroupSection(gid, q);
        if(sec) mount.appendChild(sec);
      });

      // 2) í”¼ë“œë°± ì¹´ë“œ
      if(currentView === 'all' || currentView === 'feedback'){
        const sec = document.createElement('section');
        sec.className = 'card p-24 feedback-section';
        sec.style.marginTop = '16px';
        sec.innerHTML = getFeedbackHTML();
        mount.appendChild(sec);
      }

      // 3) ìƒë‹¨ í†µê³„ ì—…ë°ì´íŠ¸
      updateStats();

      // 4) ì§‘ì¤‘ ë³´ì™„ ì—…ë°ì´íŠ¸
      renderFocus();
    }

    // =========================
    // 4. ìƒë‹¨ í†µê³„ ê³„ì‚°
    // =========================
    function updateStats(){
      // ì „ì²´ ë“ì /ë°°ì  (ëª¨ë“  group ì†Œê³„ ê¸°ì¤€)
      const totals = Object.values(groupMeta).reduce((acc,g)=>{
        acc.correct += (g.summaryCorrect||0);
        acc.total   += (g.summaryTotal||0);
        return acc;
      },{correct:0,total:0});
      const overallPct = weightedPct(totals.correct, totals.total); // ê°€ì¤‘ í‰ê·  KC ì„±ì·¨ë„
      const avgGroupPct = average(Object.values(groupMeta).map(g=>g.summaryScore));

      // ì „ì²´ KC ì„±ì·¨ë„
      const overallKCEl = document.getElementById('overallKC');
      const overallKCBar = document.getElementById('overallKCBar');
      const overallKCRaw = document.getElementById('overallKCRaw');
      overallKCEl.textContent = overallPct==null? 'ë¯¸í•™ìŠµ' : scoreLabel(overallPct);
      overallKCBar.style.width = (overallPct==null?0:clamp(overallPct))+'%';
      overallKCBar.style.background = barColor(overallPct);
      overallKCRaw.textContent = totals.total
        ? `ì „ì²´ KC ê°€ì¤‘ì¹˜ ê¸°ì¤€ Â· ${totals.correct}/${totals.total}`
        : '';

      // ì¤‘ë‹¨ì›ë³„ í‰ê·  ì„±ì·¨ë„
      const avgGroupEl = document.getElementById('avgGroup');
      const avgGroupBar = document.getElementById('avgGroupBar');
      avgGroupEl.textContent = avgGroupPct==null? 'ë¯¸í•™ìŠµ' : scoreLabel(avgGroupPct);
      avgGroupBar.style.width = (avgGroupPct==null?0:clamp(avgGroupPct))+'%';
      avgGroupBar.style.background = barColor(avgGroupPct);

      // ì´ ë“ì  / ì´ ë°°ì 
      const totalRateEl = document.getElementById('totalRate');
      const totalRateBar = document.getElementById('totalRateBar');
      const totalCountEl = document.getElementById('totalCount');
      const totalPct = overallPct;
      totalRateEl.textContent = totalPct==null? 'ë¯¸í•™ìŠµ' : scoreLabel(totalPct);
      totalRateBar.style.width = (totalPct==null?0:clamp(totalPct))+'%';
      totalRateBar.style.background = barColor(totalPct);
      totalCountEl.textContent = `(${totals.correct}/${totals.total})`;
    }

    // =========================
    // 5. ì§‘ì¤‘ ë³´ì™„ ë¦¬ìŠ¤íŠ¸
    // =========================
    function renderFocus(){
      const list = document.getElementById('focusList');

      // ì ìˆ˜ê°€ ì¡´ì¬í•˜ê³  85 ë¯¸ë§Œì¸ í•™ìŠµìš”ì†Œë§Œ ì¶”ë¦¼
      const weak = kcItems
        .filter(k => k.score!=null)
        .filter(k => k.score < 85)
        .sort((a,b)=> (a.score - b.score) || (a.label > b.label ? 1 : -1))
        .slice(0,3);

      if(!weak.length){
        list.innerHTML = `<li class="muted">ì§‘ì¤‘ ë³´ì™„ì´ í•„ìš”í•œ ì˜ì—­ì´ ì—†ìŠµë‹ˆë‹¤. í›Œë¥­í•©ë‹ˆë‹¤!</li>`;
        return;
      }

      list.innerHTML = weak.map(k=>{
        const tip = tips[k.label] || "í•µì‹¬ ê°œë…ì„ ë¬¸ì¥ìœ¼ë¡œ ì„¤ëª…í•˜ê³ , ì˜ˆì‹œ ë¬¸ì œë¥¼ ì§ì ‘ í’€ë©° ìŠ¤ìŠ¤ë¡œ ì±„ì í•´ë³´ì„¸ìš”.";
        return `
          <li style="margin:6px 0;line-height:1.5">
            <strong>${k.label}</strong>
            <span class="pill" style="${statusColor(k.score)};margin-left:4px">${scoreLabel(k.score)}</span>
            <br><span class="muted">ì²˜ë°©: ${tip}</span>
          </li>
        `;
      }).join('');
    }

    // =========================
    // 6. ì´ˆê¸°í™” / ì´ë²¤íŠ¸
    // =========================
    function init(){
      document.getElementById('printBtn').addEventListener('click', () => window.print());

      document.body.addEventListener('click', (e)=>{
        const btn = e.target.closest('.view-btn');
        if(!btn) return;
        document.querySelectorAll('.view-btn').forEach(b=>{
          b.classList.remove('active');
          b.setAttribute('aria-pressed','false');
        });
        btn.classList.add('active');
        btn.setAttribute('aria-pressed','true');
        currentView = btn.dataset.view || 'all';
        renderView();
      });

      searchEl.addEventListener('input', renderView);

      renderView();
    }

    document.addEventListener('DOMContentLoaded', init);

  })();
  </script>
</body>
</html>
