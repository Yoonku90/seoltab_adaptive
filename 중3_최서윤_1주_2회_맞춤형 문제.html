<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¤‘3 ìµœì„œìœ¤ - ì•½ì  ë³´ì™„ ë§ì¶¤í˜• ë¬¸ì œ</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; margin: 0; padding: 2em; background-color: #f4f7f9; color: #333; }
        .quiz-container { max-width: 800px; margin: auto; background: white; padding: 2em; border-radius: 10px; box-shadow: 0 0 15px rgba(0,0,0,0.05); }
        h1, h2 { text-align: center; color: #2c3e50; }
        .info-block { margin-bottom: 2em; padding-bottom: 1em; border-bottom: 1px solid #e0e0e0; }
        .question-block { margin-bottom: 2.5em; border-top: 1px solid #e0e0e0; padding-top: 1.5em; }
        .question-block .q-title { font-weight: bold; margin-bottom: 1em; line-height: 1.5; }
        .passage { background-color: #f8f9fa; border-left: 4px solid #007bff; padding: 1em; margin: 1em 0; font-size: 0.95em; color: #555; white-space: pre-wrap; line-height: 1.6; }
        .options label { display: block; margin-bottom: 0.8em; cursor: pointer; padding: 0.5em; border-radius: 5px; transition: background-color 0.2s; }
        .options label:hover { background-color: #e9ecef; }
        input[type="radio"], input[type="text"] { margin-right: 0.5em; vertical-align: middle; }
        input[type="text"] { width: 90%; padding: 0.5em; border: 1px solid #ccc; border-radius: 4px; }
        .submit-btn { display: block; width: 100%; padding: 1em; font-size: 1.1em; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; margin-top: 2em; }
        .submit-btn:hover { background-color: #218838; }
        .results-area { margin-top: 2em; padding: 1.5em; background-color: #eef8ff; border: 1px solid #b8dcf1; border-radius: 8px; }
        textarea { width: 100%; height: 200px; margin-top: 1em; font-family: monospace; }
        .correct { color: green; font-weight: bold; }
        .incorrect { color: red; font-weight: bold; }
        .explanation-details { margin-top: 10px; font-size: 0.9em; }
        .explanation-details summary { cursor: pointer; color: #0056b3; font-weight: normal; display: inline-block; padding: 2px 6px; border-radius: 4px; background-color: #e9ecef; }
        .explanation-details[open] summary { background-color: #007bff; color: white; }
        .explanation-content { margin-top: 8px; padding: 10px; background-color: #f8f9fa; border-radius: 4px; color: #444; line-height: 1.6; }
    </style>
</head>
<body>
    <div class="quiz-container">
        <h1>ì¤‘3 ì˜ì–´ 5ê³¼ ì•½ì  ë³´ì™„ í€´ì¦ˆ</h1>
        <div class="info-block">
            <label for="studentName">ì´ë¦„:</label>
            <input type="text" id="studentName" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" value="ì¤‘3_ìµœì„œìœ¤">
        </div>
        <div id="quiz-form"></div>
        <button class="submit-btn" onclick="submitQuiz()">ê²°ê³¼ í™•ì¸ ë° ë³µì‚¬í•˜ê¸°</button>
        <div id="results" class="results-area" style="display:none;">
            <h2>ğŸ“ ì±„ì  ê²°ê³¼</h2>
            <p id="score"></p>
            <div id="feedback"></div>
            <h3>ğŸ“‹ ê²°ê³¼ ë³µì‚¬í•˜ê¸°</h3>
            <p>ì•„ë˜ ë‚´ìš©ì„ ë³µì‚¬í•˜ì—¬ ì„ ìƒë‹˜ê»˜ ì œì¶œí•˜ì„¸ìš”.</p>
            <textarea id="resultText" readonly></textarea>
        </div>
    </div>

    <script>
        const quizData = [
            {
                question: `ë‹¤ìŒ ëŒ€í™”ì˜ íë¦„ìœ¼ë¡œ ë³´ì•„, ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì‘ë‹µê³¼ ì´ì–´ì§€ëŠ” ê´„í˜¸ ì•ˆì˜ ì§ˆë¬¸ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?`,
                passage: `G: Jiho, what are you reading?
B: I'm reading a book about a baseball player named Jim Abbott.
G: Oh, the man who was born without a right hand?
B: That's right. He tried really hard and even won the MVP award.
G: Yeah. His story was made into a movie. I'm going to watch it this Saturday.
B: Really? What's the title?
G: Our Hero. I'm really looking forward to watching it.
B: _____________________ (_____________________)
G: Sure. See you on Saturday.`,
                options: ["I'd love to, but I can't. (Do you mind if I join you?)", "Sounds great. I can't wait. (Can I join you?)", "I already watched it. (How about another movie?)", "No, thank you. I'm not interested. (When should we meet?)", "It's my pleasure. (What is the movie about?)"],
                answer: 1,
                type: 'mc',
                explanation: "Bê°€ ì˜í™”ì— ëŒ€í•œ ê¸°ëŒ€ê°ì„ í‘œí˜„í–ˆê³ , Gì˜ ë§ˆì§€ë§‰ ëŒ€ë‹µì´ 'Sure.'ì´ë¯€ë¡œ ë¹ˆì¹¸ì—ëŠ” ì œì•ˆì„ ìš”ì²­í•˜ëŠ” 'Can I join you?'ê°€ ë“¤ì–´ê°€ëŠ” ê²ƒì´ ìì—°ìŠ¤ëŸ½ë‹¤. ë”°ë¼ì„œ ê¸ì •ì ì¸ ë°˜ì‘ê³¼ í•¨ê»˜ ì œì•ˆì„ ìš”ì²­í•˜ëŠ” â‘¡ë²ˆì´ ê°€ì¥ ì ì ˆí•˜ë‹¤."
            },
            {
                question: "ë‹¤ìŒì€ ì½˜ì„œíŠ¸ í‹°ì¼“ì„ ì˜ˆë§¤í•˜ëŠ” ìƒí™©ì˜ ëŒ€í™”ì´ë‹¤. ë°‘ì¤„ ì¹œ â“~â“” ì¤‘, ë¬¸ë§¥ì˜ íë¦„ìƒ ê°€ì¥ <u>ì–´ìƒ‰í•œ</u> ê²ƒì€?",
                passage: `Boy: The tickets for the World Music Concert are on sale now and â“<u>I can't wait to see the concert!</u>
Girl: Really? Let's book the tickets online right away.
Boy: Okay. Let's see... There are still tickets left for November 5th.
Girl: Sounds good. Let's get two student tickets.
Boy: Oh, do you mind if I bring my little brother?
Girl: â“‘<u>Not at all.</u> But it says that you are not allowed to bring children under 8.
Boy: Oh, I didn't know that. My brother is 7.
Girl: â“’<u>It's okay.</u> The total price is 25 dollars.
Boy: Great. â““<u>I'm thankful to you for buying the tickets.</u>
Girl: â“”<u>It's my pleasure.</u> I'm looking forward to seeing the concert!`,
                options: ["â“", "â“‘", "â“’", "â““", "â“”"],
                answer: 2,
                type: 'mc',
                explanation: "ëŒ€í™”ì—ì„œ 8ì„¸ ë¯¸ë§Œì˜ ì–´ë¦°ì´ëŠ” ì…ì¥ì´ ë¶ˆê°€ëŠ¥í•˜ë‹¤ê³  ëª…ì‹œë˜ì–´ ìˆë‹¤. ë‚¨ë™ìƒì´ 7ì‚´ì´ë¼ê³  ë°í˜”ìŒì—ë„ ì†Œë…€ê°€ 'It's okay'ë¼ê³  ë‹µí•˜ëŠ” ê²ƒì€ ì•ì„  ì •ë³´ì™€ ëª¨ìˆœë˜ë¯€ë¡œ ë¬¸ë§¥ìƒ ì–´ìƒ‰í•˜ë‹¤. ë”°ë¼ì„œ ì •ë‹µì€ â‘¢ì´ë‹¤."
            },
            {
                question: "ë‹¤ìŒ ê¸€ì˜ ë°‘ì¤„ ì¹œ â“~â“” ì¤‘, ì–´ë²•ìƒ ì“°ì„ì´ ì ì ˆí•˜ì§€ <u>ì•Šì€</u> ê²ƒì€?",
                passage: `Tears of joy are rolling down my cheeks. I'm so happy and thrilled. â“<u>If I were a bird, I would fly.</u> I look around. The other members in my orchestra are hugging one another. Our concert has just finished and everyone is standing and giving us a big hand. â“‘<u>None of us ever expected that this day would come.</u> It has been a long journey.
My name is Andrea and I'm a violinist in the Recycled Orchestra. â“’<u>Why is it called the Recycled Orchestra?</u> It's because our musical instruments are made of objects from a landfill. That's why it's also known as the Landfill Harmonic Orchestra. Most of us in the orchestra â““<u>is from Cateura</u>, a small town in Paraguay. There is a huge landfill in our town. Some people even say that Cateura itself is a giant landfill. Many of us are poor. There â“”<u>weren't many hopes and dreams in our town.</u> Everything began to change, however, when we met Favio ChÃ¡vez.`,
                options: ["â“", "â“‘", "â“’", "â““", "â“”"],
                answer: 3,
                type: 'mc',
                explanation: "â““: ì£¼ì–´ëŠ” `Most of us in the orchestra`ì´ë‹¤. `most of` ë‹¤ìŒì˜ ëª…ì‚¬ `us`ê°€ ë³µìˆ˜ì´ë¯€ë¡œ ë™ì‚¬ë„ ë³µìˆ˜í˜•ì¸ `are`ë¥¼ ì¨ì•¼ í•œë‹¤. `is`ëŠ” ë‹¨ìˆ˜ ë™ì‚¬ì´ë¯€ë¡œ ì–´ë²•ìƒ í‹€ë¦¬ë‹¤."
            },
            {
                question: "ë‹¤ìŒ ê¸€ì˜ (A), (B), (C)ì˜ ë„¤ëª¨ ì•ˆì—ì„œ ì–´ë²•ì— ë§ëŠ” í‘œí˜„ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•œ ê²ƒì€?",
                passage: `We had another problem. No one knew (A)<u>how to play / what to play</u> musical instruments. We didn't even know how to read music. Favio taught us with great patience. Step by step, we began to make some sounds on our instruments. I still remember the first piece of music (B)<u>that / what</u> we played. It was very short and mostly out of tune. But it was the most beautiful music to us. We felt a new hope in our hearts. From then on, we (C)<u>gathered / were gathered</u> to practice every day. One day, Favio told us some great news. We were going to have a concert, a real concert!`,
                options: ["(A) how to play ----- (B) that ----- (C) gathered", "(A) how to play ----- (B) what ----- (C) were gathered", "(A) what to play ---- (B) that ----- (C) gathered", "(A) what to play ---- (B) what ----- (C) were gathered", "(A) how to play ----- (B) that ----- (C) were gathered"],
                answer: 0,
                type: 'mc',
                explanation: "(A) 'ì•…ê¸°ë¥¼ ì—°ì£¼í•˜ëŠ” ë°©ë²•'ì´ë¼ëŠ” ì˜ë¯¸ê°€ ë˜ì–´ì•¼ í•˜ë¯€ë¡œ 'ì˜ë¬¸ì‚¬+toë¶€ì •ì‚¬' êµ¬ë¬¸ì¸ `how to play`ê°€ ì ì ˆí•˜ë‹¤. (B) ì„ í–‰ì‚¬ `the first piece of music`ì„ ìˆ˜ì‹í•˜ëŠ” ëª©ì ê²© ê´€ê³„ëŒ€ëª…ì‚¬ `that`ì´ ì™€ì•¼ í•œë‹¤. `what`ì€ ì„ í–‰ì‚¬ë¥¼ í¬í•¨í•˜ë¯€ë¡œ ì˜¬ ìˆ˜ ì—†ë‹¤. (C) ì£¼ì–´ì¸ `we`ê°€ ì—°ìŠµì„ ìœ„í•´ ëª¨ì´ëŠ” ê²ƒì´ë¯€ë¡œ ëŠ¥ë™íƒœ ë™ì‚¬ `gathered`ê°€ ì ì ˆí•˜ë‹¤."
            },
            {
                question: "<ë³´ê¸°>ì˜ ë¬¸ì¥ ì¤‘, ì–´ë²•ìƒ ì˜³ì€ ë¬¸ì¥ì„ <u>ëª¨ë‘</u> ê³ ë¥¸ ê²ƒì€?",
                passage: `<ë³´ê¸°>
â“ If I have enough time, I would visit my grandparents.
â“‘ She asked me what to do for the science project.
â“’ The problem was how solving the difficult math question.
â““ He felt so thrilled that he couldn't say anything.
â“” If it was not for your help, I couldn't finish my homework.`,
                options: ["â“, â“’", "â“‘, â““", "â“’, â“”", "â“, â“‘, â““", "â“‘, â““, â“”"],
                answer: 1,
                type: 'mc',
                explanation: "â“ ê°€ì •ë²• ê³¼ê±° ë¬¸ì¥ì´ë¯€ë¡œ `If I had...`ê°€ ë˜ì–´ì•¼ í•œë‹¤. â“’ `how` ë’¤ì—ëŠ” ì™„ì „í•œ ì ˆ(ì£¼ì–´+ë™ì‚¬)ì´ë‚˜ `toë¶€ì •ì‚¬`ê°€ ì™€ì•¼ í•˜ë¯€ë¡œ `how to solve`ê°€ ë˜ì–´ì•¼ í•œë‹¤. â“” ê°€ì •ë²• ê³¼ê±°ì˜ beë™ì‚¬ëŠ” ì¸ì¹­ì— ìƒê´€ì—†ì´ `were`ë¥¼ ì“°ëŠ” ê²ƒì´ ì›ì¹™ì´ë¯€ë¡œ `If it were not for...`ê°€ ë” ì ì ˆí•˜ë‹¤. ë”°ë¼ì„œ ì–´ë²•ìƒ ì˜¬ë°”ë¥¸ ë¬¸ì¥ì€ â“‘ì™€ â““ì´ë‹¤."
            },
            {
                question: "ë‹¤ìŒ ê¸€ì˜ ë¹ˆì¹¸ì— ë“¤ì–´ê°ˆ ì „ì¹˜ì‚¬ê°€ ìˆœì„œëŒ€ë¡œ ë°”ë¥´ê²Œ ì§ì§€ì–´ì§„ ê²ƒì€?",
                passage: `Favio was an environmental educator and a musician. He wanted to teach us music, but there was a big problem. There were only a few musical instruments in the whole town. We couldn't afford to buy new ones. But Favio didn't give up. He said that we could make musical instruments with objects from the landfill. A talented man named Nicholas was able to put this idea ______ practice. He made violins from oil drums. He turned water pipes ______ flutes.`,
                options: ["into â€“ into", "into â€“ from", "from â€“ into", "for â€“ from", "for â€“ into"],
                answer: 0,
                type: 'mc',
                explanation: "`put something into practice`ëŠ” '~ì„ ì‹¤í–‰ì— ì˜®ê¸°ë‹¤'ë¼ëŠ” ìˆ™ì–´ í‘œí˜„ì´ë‹¤. `turn A into B`ëŠ” 'Aë¥¼ Bë¡œ ë°”ê¾¸ë‹¤'ë¼ëŠ” ì˜ë¯¸ì˜ êµ¬ë¬¸ì´ë‹¤. ë”°ë¼ì„œ ë‘ ë¹ˆì¹¸ì—ëŠ” ëª¨ë‘ `into`ê°€ ë“¤ì–´ê°€ëŠ” ê²ƒì´ ì˜¬ë°”ë¥´ë‹¤."
            },
            {
                question: "ë‹¤ìŒ ê¸€ì„ ì½ê³  ì¶”ë¡ í•  ìˆ˜ ìˆëŠ” ë‚´ìš©ìœ¼ë¡œ ê°€ì¥ ì ì ˆí•˜ì§€ <u>ì•Šì€</u> ê²ƒì€?",
                passage: `Favio was an environmental educator and a musician. He wanted to teach us music, but there was a big problem. There were only a few musical instruments in the whole town. We couldn't afford to buy new ones. But Favio didn't give up. He said that we could make musical instruments with objects from the landfill. A talented man named Nicholas was able to put this idea into practice. He made violins from oil drums. He turned water pipes into flutes.`,
                options: ["The town likely faced economic challenges that limited access to new goods.", "Nicholas possessed creative skills in craftsmanship and recycling.", "Favio demonstrated resilience and a problem-solving mindset.", "The children were initially hesitant to use instruments made from trash.", "The landfill, a source of waste, became a source of opportunity."],
                answer: 3,
                type: 'mc',
                explanation: "ë³¸ë¬¸ì—ì„œëŠ” ì•„ì´ë“¤ì´ ì•…ê¸°ë¥¼ ì‚´ í˜•í¸ì´ ì•ˆ ë˜ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ë§Œ ì–¸ê¸‰í•  ë¿, ì“°ë ˆê¸°ë¡œ ë§Œë“  ì•…ê¸°ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì— ëŒ€í•´ ì²˜ìŒë¶€í„° ì£¼ì €í–ˆëŠ”ì§€ ì—¬ë¶€ëŠ” ë‚˜ì™€ìˆì§€ ì•Šë‹¤. ë”°ë¼ì„œ â‘£ëŠ” ë³¸ë¬¸ì„ í†µí•´ ì¶”ë¡ í•  ìˆ˜ ì—†ëŠ” ë‚´ìš©ì´ë‹¤."
            },
            {
                question: "ë‹¤ìŒ ê¸€ì˜ ë°‘ì¤„ ì¹œ â“~â“” ì¤‘, ë¬¸ë§¥ìƒ ë‚±ë§ì˜ ì“°ì„ì´ ì ì ˆí•˜ì§€ <u>ì•Šì€</u> ê²ƒì€?",
                passage: `We had another problem. No one knew how to play musical instruments. We didn't even know how to read music. Favio taught us with great â“<u>patience</u>. Step by step, we began to make some sounds on our instruments. I still remember the first piece of music that we played. It was very short and mostly â“‘<u>out of tune</u>. But it was the most beautiful music to us. We felt a new hope in our hearts. From then on, we gathered to â“’<u>practice</u> every day. One day, Favio told us some great news. We were going to have a concert, a real concert! And here we are now in front of hundreds of people. They â““<u>love</u> our music. The world sends us trash, but we send back â“”<u>disappointment</u>!`,
                options: ["â“", "â“‘", "â“’", "â““", "â“”"],
                answer: 4,
                type: 'mc',
                explanation: "ê¸€ì˜ ë§ˆì§€ë§‰ ë¬¸ì¥ì€ 'ì„¸ìƒì€ ìš°ë¦¬ì—ê²Œ ì“°ë ˆê¸°ë¥¼ ë³´ë‚´ì§€ë§Œ, ìš°ë¦¬ëŠ” ìŒì•…ì„ ëŒë ¤ë³´ë‚¸ë‹¤!'ëŠ” ê¸ì •ì ì´ê³  í¬ë§ì ì¸ ë©”ì‹œì§€ë¥¼ ì „ë‹¬í•œë‹¤. ë”°ë¼ì„œ 'ì‹¤ë§(disappointment)'ì€ ë¬¸ë§¥ì— ë§ì§€ ì•Šìœ¼ë©°, 'ìŒì•…(music)'ê³¼ ê°™ì€ ê¸ì •ì ì¸ ë‹¨ì–´ê°€ ì™€ì•¼ í•œë‹¤."
            },
            {
                question: "ë‹¤ìŒ ê¸€ì˜ íë¦„ìœ¼ë¡œ ë³´ì•„, ì£¼ì–´ì§„ ë¬¸ì¥ì´ ë“¤ì–´ê°€ê¸°ì— ê°€ì¥ ì ì ˆí•œ ê³³ì€?",
                passage: `But it was the most beautiful music to us.

We had another problem. No one knew how to play musical instruments. We didn't even know how to read music. ( â‘  ) Favio taught us with great patience. Step by step, we began to make some sounds on our instruments. ( â‘¡ ) I still remember the first piece of music that we played. ( â‘¢ ) It was very short and mostly out of tune. ( â‘£ ) We felt a new hope in our hearts. From then on, we gathered to practice every day. ( â‘¤ ) One day, Favio told us some great news. We were going to have a concert, a real concert!`,
                options: ["â‘ ", "â‘¡", "â‘¢", "â‘£", "â‘¤"],
                answer: 3,
                type: 'mc',
                explanation: "ì£¼ì–´ì§„ ë¬¸ì¥ì€ 'ê·¸ëŸ¬ë‚˜ ê·¸ê²ƒì€ ìš°ë¦¬ì—ê²Œ ê°€ì¥ ì•„ë¦„ë‹¤ìš´ ìŒì•…ì´ì—ˆë‹¤'ëŠ” ë‚´ìš©ì´ë‹¤. ì´ëŠ” ì•ì„œ ì—°ì£¼ê°€ 'ì§§ê³  ëŒ€ë¶€ë¶„ ìŒì´ ë§ì§€ ì•Šì•˜ë‹¤(short and mostly out of tune)'ëŠ” ë¶€ì •ì ì¸ í‰ê°€ì— ëŒ€í•œ ë°˜ì „ì´ë¯€ë¡œ, í•´ë‹¹ ë¬¸ì¥ ë°”ë¡œ ë’¤ì¸ â‘£ì— ë“¤ì–´ê°€ëŠ” ê²ƒì´ ê°€ì¥ ìì—°ìŠ¤ëŸ½ë‹¤."
            },
            {
                question: "ë‹¤ìŒ ëŒ€í™”ì˜ ë‚´ìš©ê³¼ ì¼ì¹˜í•˜ì§€ <u>ì•ŠëŠ”</u> ê²ƒì€?",
                passage: `Linda: Hi, Tony! What are you going to do this weekend?
Tony: I'm going to watch the musical, Billy Elliot.
Linda: Billy Elliot? What is it about?
Tony: It's about a boy who became a famous dancer. I'm looking forward to watching it.
Linda: Sounds interesting. Who is the main actor?
Tony: Jason Kim. He's a great dancer.
Linda: He's my favorite actor. I watched his musical last year.
Tony: Oh, really? Do you want to join me?
Linda: I'd love to, but I can't. I have volunteer work this weekend.
Tony: Okay. Maybe next time!`,
                options: ["Tony is excited about his plan to watch a musical on the weekend.", "Linda is already familiar with the story of the musical, Billy Elliot.", "The lead actor in the musical is an accomplished dancer.", "Linda has previous experience watching a musical starring Jason Kim.", "Linda politely declines Tony's offer due to a prior commitment."],
                answer: 1,
                type: 'mc',
                explanation: "LindaëŠ” Tonyì—ê²Œ 'Billy Elliot? What is it about?'ì´ë¼ê³  ë¬¼ìœ¼ë©° ë®¤ì§€ì»¬ì˜ ë‚´ìš©ì— ëŒ€í•´ ì „í˜€ ëª¨ë¥´ê³  ìˆì—ˆë‹¤. ê·¸ë…€ê°€ ì•„ëŠ” ê²ƒì€ ì£¼ì—° ë°°ìš°ì¸ Jason Kimë¿ì´ë‹¤. ë”°ë¼ì„œ Lindaê°€ ë®¤ì§€ì»¬ ìŠ¤í† ë¦¬ì— ìµìˆ™í•˜ë‹¤ëŠ” â‘¡ë²ˆ ì„¤ëª…ì€ ë‚´ìš©ê³¼ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ”ë‹¤."
            }
        ];

        const quizForm = document.getElementById('quiz-form');
        const circledNumbers = ['â‘ ', 'â‘¡', 'â‘¢', 'â‘£', 'â‘¤'];

        quizData.forEach((q, index) => {
            const questionBlock = document.createElement('div');
            questionBlock.className = 'question-block';
            
            let content = `<div class="q-title"><strong>${index + 1}.</strong> ${q.question}</div>`;
            
            if (q.passage) {
                content += `<div class="passage">${q.passage.replace(/\n\n/g, '<br><br>')}</div>`;
            }

            if (q.type === 'mc') {
                content += '<div class="options">';
                q.options.forEach((opt, i) => {
                    content += `<label><input type="radio" name="q${index}" value="${i}"> ${circledNumbers[i]} ${opt}</label>`;
                });
                content += '</div>';
            } else if (q.type === 'text') {
                content += `<input type="text" name="q${index}" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”.">`;
            }
            questionBlock.innerHTML = content;
            quizForm.appendChild(questionBlock);
        });

        function submitQuiz() {
            const studentName = document.getElementById('studentName').value || 'ìµëª…';
            let score = 0;
            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.innerHTML = '';
            let resultString = `í•™ìƒ ID: ${studentName}\në‚ ì§œ: ${new Date().toLocaleDateString()}\n\n[ì±„ì  ê²°ê³¼]\n\n`;

            quizData.forEach((q, index) => {
                const inputs = document.getElementsByName(`q${index}`);
                let userAnswerRaw;
                let userAnswerText = "ë‹µë³€ ì•ˆ í•¨";
                let isCorrect = false;

                if (q.type === 'mc') {
                    for (const input of inputs) {
                        if (input.checked) {
                            userAnswerRaw = parseInt(input.value);
                            userAnswerText = `${circledNumbers[userAnswerRaw]} ${q.options[userAnswerRaw]}`;
                            break;
                        }
                    }
                    isCorrect = (userAnswerRaw === q.answer);
                } else if (q.type === 'text') {
                    userAnswerRaw = inputs[0].value.trim();
                    userAnswerText = userAnswerRaw;
                    const correctAnswer = q.answer.toLowerCase().replace(/\.$/, '');
                    isCorrect = (userAnswerRaw.toLowerCase().replace(/\.$/, '') === correctAnswer);
                }
                
                const feedbackP = document.createElement('p');
                let resultLine;
                const correctAnswerText = q.type === 'mc' ? `${circledNumbers[q.answer]} ${q.options[q.answer]}` : q.answer;

                const detailsBlock = `
                    <details class="explanation-details">
                        <summary>í•´ì„¤ ë³´ê¸°</summary>
                        <div class="explanation-content">${q.explanation}</div>
                    </details>`;
                
                if (isCorrect) {
                    score++;
                    feedbackP.innerHTML = `<strong>${index + 1}ë²ˆ:</strong> <span class="correct">ì •ë‹µ (1)</span> ${detailsBlock}`;
                    resultLine = `ë¬¸ì œ ë²ˆí˜¸: ${index + 1}\tì •ì˜¤ ì—¬ë¶€: 1\n`;
                } else {
                    feedbackP.innerHTML = `<strong>${index + 1}ë²ˆ:</strong> <span class="incorrect">ì˜¤ë‹µ (0)</span> (ì •ë‹µ: ${correctAnswerText}) ${detailsBlock}`;
                    resultLine = `ë¬¸ì œ ë²ˆí˜¸: ${index + 1}\tì •ì˜¤ ì—¬ë¶€: 0\tí•™ìƒì´ ê³ ë¥¸ ì˜¤ë‹µ: ${userAnswerText}\n`;
                }
                feedbackDiv.appendChild(feedbackP);
                resultString += resultLine;
            });

            const finalScore = (score / quizData.length) * 100;
            document.getElementById('score').innerText = `ì´ì : ${score} / ${quizData.length} (${finalScore.toFixed(1)}ì )`;
            document.getElementById('results').style.display = 'block';
            
            resultString += `\nì´ì : ${score}/${quizData.length} (${finalScore.toFixed(1)}ì )`;
            document.getElementById('resultText').value = resultString;
        }
    </script>
</body>
</html>

